<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>9.12 &#8212; Shallow vs. deep copying &laquo; Learn C++</title>
	<link rel="shortcut icon" href="http://www.learncpp.com/blog/wp-content/ata-images/learncpp.ico" />
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://www.learncpp.com/blog/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="Learn C++ &raquo; Feed" href="http://www.learncpp.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Learn C++ &raquo; Comments Feed" href="http://www.learncpp.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Learn C++ &raquo; 9.12 &#8212; Shallow vs. deep copying Comments Feed" href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.learncpp.com\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.2"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='http://www.learncpp.com/blog/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-familiar-learncppcom-css'  href='http://www.learncpp.com/blog/wp-content/uploads/crayon-syntax-highlighter/themes/familiar-learncppcom/familiar-learncppcom.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='http://www.learncpp.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://www.learncpp.com/blog/wp-content/plugins/jetpack/_inc/genericons/genericons/genericons.css?ver=3.1' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='http://www.learncpp.com/blog/wp-content/plugins/jetpack/css/jetpack.css?ver=3.5.3' type='text/css' media='all' />
<!-- This site uses the Google Analytics by Yoast plugin v5.4.2 - Universal disabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-2173612-1']);
	_gaq.push(['_gat._forceSSL']);
	_gaq.push(['_trackPageview']);

	(function () {
		var ga = document.createElement('script');
		ga.type = 'text/javascript';
		ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(ga, s);
	})();

</script>
<!-- / Google Analytics by Yoast -->
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-includes/js/jquery/jquery.js?ver=1.11.2'></script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var AjaxCheckClicks = {"ajaxurl":"http:\/\/www.learncpp.com\/blog\/wp-admin\/admin-ajax.php","nonce":"12738d6e92"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/plugins/adsense-click-fraud-monitoring/js/checkclicks.js?ver=4.2.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var AjaxUpdateClicks = {"ajaxurl":"http:\/\/www.learncpp.com\/blog\/wp-admin\/admin-ajax.php","nonce":"441c3b4826"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/plugins/adsense-click-fraud-monitoring/js/updateclicks.js?ver=4.2.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.7.1","is_admin":"0","ajaxurl":"http:\/\/www.learncpp.com\/blog\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.7.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var clientcfmonitor = {"client_ip":"220.224.212.192","clickcount":"8","bannedperiod":"1","preurl":"http:\/\/www.learncpp.com\/blog\/wp-content\/plugins\/adsense-click-fraud-monitoring\/clickupdate.php","firstclickdate":[[""],[""]],"updatedVisitCount":"0","isblockedcount":"0","customclass":"cf_monitor","firstclick":"false","disablead":"false","currentURL":"\/cpp-tutorial\/912-shallow-vs-deep-copying\/"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/plugins/adsense-click-fraud-monitoring/js/check_min.js?ver=4.2.2'></script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/themes/atahualpa/js/DD_roundies.js?ver=0.0.2a'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.learncpp.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.learncpp.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='9.11 &#8212; The copy constructor and overloading the assignment operator' href='http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/' />
<link rel='next' title='LearnCpp.com tutorials: Now with syntax highlighting!' href='http://www.learncpp.com/site-news/learncppcom-tutorials-now-with-syntax-highlighting/' />
<link rel='canonical' href='http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/' />
<link rel='shortlink' href='http://www.learncpp.com/?p=151' />
<script type="text/javascript">
    window._mNHandle = window._mNHandle || {};
    window._mNHandle.queue = window._mNHandle.queue || [];
    medianet_versionId = "121199"; 
    (function() {
        var sct = document.createElement("script"),
        sctHl = document.getElementsByTagName("script")[0],
        isSSL = 'https:' == document.location.protocol;
        sct.type = "text/javascript";
        sct.src = (isSSL ? 'https:' : 'http:') + '//contextual.media.net/dmedianet.js?cid=8CUIE2148' + (isSSL ? '&https=1' : '')+'';
        sct.async = "async";
        sctHl.parentNode.insertBefore(sct, sctHl);
    })();
</script>
<!-- wpSolution Code -->
        <script type="text/javascript">
            function wpSolutionToggle(solution, link, showtext, hidetext) {
                if (solution.style.display != 'none') {
                    solution.style.display = 'none';
                    link.innerHTML = showtext;
                    link.className = 'solution_link_show';
                } else {
                    solution.style.display = 'block';
                    link.innerHTML = hidetext;
                    link.className = 'solution_link_hide';
                }
            }
          </script>
<style type='text/css'>img#wpstats{display:none}</style><style type="text/css">body{text-align:center;margin:0;padding:0;font-family:verdana,arial,sans-serif;font-size:13px;line-height:1.4;color:#000000;background:#bbb;padding-bottom:20px}a:link,a:visited,a:active{color:#365DA0;font-weight:bold;text-decoration:none;}a:hover{color:#365DA0;font-weight:bold;text-decoration:underline}ul,ol,dl,p,h1,h2,h3,h4,h5,h6{margin-top:10px;margin-bottom:10px;padding-top:0;padding-bottom:0;}ul ul,ul ol,ol ul,ol ol{margin-top:0;margin-bottom:0}code,pre{font-family:"Courier New",Courier,monospace;font-size:1em}pre{overflow:auto;word-wrap:normal;padding-bottom:1.5em;overflow-y:hidden;width:99%}abbr[title],acronym[title]{border-bottom:1px dotted}hr{display:block;height:2px;border:none;margin:0.5em auto;color:#cccccc;background-color:#cccccc}table{font-size:1em;}div.post,ul.commentlist li,ol.commentlist li{word-wrap:break-word;}pre,.wp_syntax{word-wrap:normal;}div#wrapper{text-align:center;margin-left:auto;margin-right:auto;display:block;width:100%}div#container{padding:20px;box-shadow:0 0 15px #333;-moz-box-shadow:0 0 15px #333;width:auto;margin-left:auto;margin-right:auto;text-align:left;display:block}table#layout{font-size:100%;width:100%;table-layout:fixed}.colone{width:200px}.colone-inner{width:10px}.coltwo{width:100% }.colthree-inner{width:10px}.colthree{width:200px}div#header.full-width{width:100%}div#header,td#header{width:auto;padding:0}table#logoarea,table#logoarea tr,table#logoarea td{margin:0;padding:0;background:none;border:0}table#logoarea{width:100%;border-spacing:0px}img.logo{display:block;margin:0 10px 0 0}td.logoarea-logo{width:1%}h1.blogtitle,h2.blogtitle{ display:block;margin:0;padding:0;letter-spacing:-1px;line-height:1.0em;font-size:200%;text-transform:uppercase;font-smooth:always}h1.blogtitle a:link,h1.blogtitle a:visited,h1.blogtitle a:active,h2.blogtitle a:link,h2.blogtitle a:visited,h2.blogtitle a:active{ text-decoration:none;color:#000000;font-weight:normal;font-smooth:always}h1.blogtitle a:hover,h2.blogtitle a:hover{ text-decoration:none;color:#AC161B;font-weight:normal}p.tagline{margin:0;padding:0;font-size:1.2em;font-weight:normal;color:#444}td.feed-icons{white-space:nowrap;}div.rss-box{height:1%;display:block;padding:10px 0 10px 10px;margin:0;width:280px}a.comments-icon{height:22px;line-height:22px;margin:0 5px 0 5px;padding-left:22px;display:block;text-decoration:none;float:right;white-space:nowrap}a.comments-icon:link,a.comments-icon:active,a.comments-icon:visited{background:transparent url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/comment-gray.png) no-repeat scroll center left}a.comments-icon:hover{background:transparent url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/comment.png) no-repeat scroll center left}a.posts-icon{height:22px;line-height:22px;margin:0 5px 0 0;padding-left:20px;display:block;text-decoration:none;float:right;white-space:nowrap}a.posts-icon:link,a.posts-icon:active,a.posts-icon:visited{background:transparent url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/rss-gray.png) no-repeat scroll center left}a.posts-icon:hover{background:transparent url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/rss.png) no-repeat scroll center left}a.email-icon{height:22px;line-height:22px;margin:0 5px 0 5px;padding-left:24px;display:block;text-decoration:none;float:right;white-space:nowrap}a.email-icon:link,a.email-icon:active,a.email-icon:visited{background:transparent url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/email-gray.png) no-repeat scroll center left}a.email-icon:hover{background:transparent url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/email.png) no-repeat scroll center left}td.search-box{height:1%}div.searchbox{height:35px;border-bottom:0;width:200px;margin:0;padding:0}div.searchbox-form{margin:5px 10px 5px 10px}div.horbar1,div.horbar2{font-size:1px;clear:both;display:block;position:relative;padding:0;margin:0}div.horbar1{height:0px;background:#ffffff;border-top:dashed 1px #cccccc}div.horbar2{height:0px;background:#ffffff;border-bottom:dashed 1px #cccccc}div.header-image-container-pre{position:relative;margin:0;padding:0;height:150px;}div.header-image-container{position:relative;margin:0;padding:0;height:150px;}div.codeoverlay{position:absolute;top:0;left:0;width:100%;height:100%}div.clickable{position:absolute;top:0;left:0;z-index:3;margin:0;padding:0;width:100%;height:150px;}a.divclick:link,a.divclick:visited,a.divclick:active,a.divclick:hover{width:100%;height:100%;display:block;text-decoration:none}td#left{vertical-align:top;padding-right:10px}td#left-inner{vertical-align:top;padding-right:10px}td#right{vertical-align:top;padding-left:10px}td#right-inner{vertical-align:top;padding-left:10px}td#middle{vertical-align:top;width:100%;background:#fff;padding-left:15px!important;padding-right:15px!important;border:solid 4px #eee}div#footer.full-width{width:100%}div#footer,td#footer{width:auto;background-color:#f7f7f7;border:solid 4px #eee;padding:10px;text-align:center;color:#888;font-size:11px;margin-left:220px;margin-right:220px;margin-top:20px;width:auto!important}div#footer a:link,div#footer a:visited,div#footer a:active,td#footer a:link,td#footer a:visited,td#footer a:active{text-decoration:none;color:#777777;font-weight:normal}div#footer a:hover,td#footer a:hover{text-decoration:none;color:#777777;font-weight:normal}div.widget{display:block;width:auto;font-size:12px;margin:0 0 10px 0;padding:10px;border:solid 4px #eee;background:#fff}div.widget-title{display:block;width:auto}div.widget-title h3,td#left h3.tw-widgettitle,td#right h3.tw-widgettitle,td#left ul.tw-nav-list,td#right ul.tw-nav-list{padding:0;margin:0;font-size:0.9em;text-align:center;font-weight:normal;text-transform:uppercase;letter-spacing:1px;color:#333;border-bottom:solid 1px #eee;padding-bottom:10px;margin-bottom:10px}div.widget ul,div.textwidget{display:block;width:auto;background:#fff}div.widget select{width:98%;margin-top:5px;}div.widget ul{list-style-type:none;margin:0;padding:0;width:auto}div.widget ul li{display:block;margin:2px 0 2px 0px;padding:0 0 0 0px;border-left:solid 0px #CCCCCC}div.widget ul li:hover,div.widget ul li.sfhover{display:block;width:auto;border-left:solid 0px #000000;}div.widget ul li ul li{margin:2px 0 2px 5px;padding:0 0 0 0px;border-left:solid 0px #CCCCCC;}div.widget ul li ul li:hover,div.widget ul li ul li.sfhover{border-left:solid 0px #000000;}div.widget ul li ul li ul li{margin:2px 0 2px 5px;padding:0 0 0 0px;border-left:solid 0px #CCCCCC;}div.widget ul li ul li ul li:hover,div.widget ul li ul li ul li.sfhover{border-left:solid 0px #000000;}div.widget a:link,div.widget a:visited,div.widget a:active,div.widget td a:link,div.widget td a:visited,div.widget td a:active,div.widget ul li a:link,div.widget ul li a:visited,div.widget ul li a:active{text-decoration:none;font-weight:normal;color:#365DA0;font-weight:normal;}div.widget ul li ul li a:link,div.widget ul li ul li a:visited,div.widget ul li ul li a:active{color:#365DA0;font-weight:normal;}div.widget ul li ul li ul li a:link,div.widget ul li ul li ul li a:visited,div.widget ul li ul li ul li a:active{color:#365DA0;font-weight:normal;}div.widget a:hover,div.widget ul li a:hover{color:#365DA0;}div.widget ul li ul li a:hover{color:#365DA0;}div.widget ul li ul li ul li a:hover{color:#365DA0;}div.widget ul li a:link,div.widget ul li a:visited,div.widget ul li a:active,div.widget ul li a:hover{display:inline}* html div.widget ul li a:link,* html div.widget ul li a:visited,* html div.widget ul li a:active,* html div.widget ul li a:hover{height:1%; } div.widget_nav_menu ul li,div.widget_pages ul li,div.widget_categories ul li{border-left:0 !important;padding:0 !important}div.widget_nav_menu ul li a:link,div.widget_nav_menu ul li a:visited,div.widget_nav_menu ul li a:active,div.widget_pages ul li a:link,div.widget_pages ul li a:visited,div.widget_pages ul li a:active,div.widget_categories ul li a:link,div.widget_categories ul li a:visited,div.widget_categories ul li a:active{padding:0 0 0 0px;border-left:solid 0px #CCCCCC}div.widget_nav_menu ul li a:hover,div.widget_pages ul li a:hover,div.widget_categories ul li a:hover{border-left:solid 0px #000000;}div.widget_nav_menu ul li ul li a:link,div.widget_nav_menu ul li ul li a:visited,div.widget_nav_menu ul li ul li a:active,div.widget_pages ul li ul li a:link,div.widget_pages ul li ul li a:visited,div.widget_pages ul li ul li a:active,div.widget_categories ul li ul li a:link,div.widget_categories ul li ul li a:visited,div.widget_categories ul li ul li a:active{padding:0 0 0 0px;border-left:solid 0px #CCCCCC}div.widget_nav_menu ul li ul li a:hover,div.widget_pages ul li ul li a:hover,div.widget_categories ul li ul li a:hover{border-left:solid 0px #000000;}div.widget_nav_menu ul li ul li ul li a:link,div.widget_nav_menu ul li ul li ul li a:visited,div.widget_nav_menu ul li ul li ul li a:active,div.widget_pages ul li ul li ul li a:link,div.widget_pages ul li ul li ul li a:visited,div.widget_pages ul li ul li ul li a:active,div.widget_categories ul li ul li ul li a:link,div.widget_categories ul li ul li ul li a:visited,div.widget_categories ul li ul li ul li a:active{padding:0 0 0 0px;border-left:solid 0px #CCCCCC}div.widget_nav_menu ul li ul li ul li a:hover,div.widget_pages ul li ul li ul li a:hover,div.widget_categories ul li ul li ul li a:hover{border-left:solid 0px #000000;}div.widget_nav_menu ul li a:link,div.widget_nav_menu ul li a:active,div.widget_nav_menu ul li a:visited,div.widget_nav_menu ul li a:hover,div.widget_pages ul li a:link,div.widget_pages ul li a:active,div.widget_pages ul li a:visited,div.widget_pages ul li a:hover{display:block !important}div.widget_categories ul li a:link,div.widget_categories ul li a:active,div.widget_categories ul li a:visited,div.widget_categories ul li a:hover{display:inline !important}table.subscribe{width:100%}table.subscribe td.email-text{padding:0 0 5px 0;vertical-align:top}table.subscribe td.email-field{padding:0;width:100%}table.subscribe td.email-button{padding:0 0 0 5px}table.subscribe td.post-text{padding:7px 0 0 0;vertical-align:top}table.subscribe td.comment-text{padding:7px 0 0 0;vertical-align:top}div.post,div.page{display:block;margin:0 0 30px 0;padding-top:20px}div.sticky{background:#eee url('<?php bloginfo('template_directory');?>/images/sticky.gif') 99% 5% no-repeat;border:dashed 1px #cccccc;padding:10px}div.post-kicker{margin:0 0 5px 0}div.post-kicker a:link,div.post-kicker a:visited,div.post-kicker a:active{color:#999;text-decoration:none;text-transform:uppercase;letter-spacing:1px}div.post-kicker a:hover{color:#cc0000}div.post-headline{}div.post-headline h1,div.post-headline h2{ margin:0; padding:0;padding:0;margin:0;font-size:1.7em}div.post-headline h2 a:link,div.post-headline h2 a:visited,div.post-headline h2 a:active,div.post-headline h1 a:link,div.post-headline h1 a:visited,div.post-headline h1 a:active{}div.post-headline h2 a:hover,div.post-headline h1 a:hover{}div.post-byline{margin:5px 0 10px 0;color:#999;text-transform:uppercase;letter-spacing:1px;font-size:11px}div.post-byline a:link,div.post-byline a:visited,div.post-byline a:active{}div.post-byline a:hover{}div.post-bodycopy{}div.post-bodycopy p{margin:1em 0;padding:0;display:block}div.post-pagination{}div.post-footer{clear:both;display:block;color:#999;text-transform:uppercase;letter-spacing:1px;font-size:11px}div.post-footer a:link,div.post-footer a:visited,div.post-footer a:active{color:#999;font-weight:normal;text-decoration:none}div.post-footer a:hover{color:#333;font-weight:normal;text-decoration:underline}div.post-kicker img,div.post-byline img,div.post-footer img{border:0;padding:0;margin:0 0 -1px 0;background:none}span.post-ratings{display:inline-block;width:auto;white-space:nowrap}div.navigation-top{border-top:solid 4px #eee;padding:8px 0}div.navigation-middle{margin:10px 0 20px 0;padding:8px 0;border-top:solid 4px #eee;border-bottom:solid 4px #eee}div.navigation-bottom{margin:20px 0 0 0;padding:10px 0 0 0;border-top:solid 4px #eee}div.navigation-comments-above{margin:0 0 10px 0;padding:5px 0 5px 0}div.navigation-comments-below{margin:0 0 10px 0;padding:5px 0 5px 0}div.older{float:left;width:48%;text-align:left;margin:0;padding:0}div.newer{float:right;width:48%;text-align:right;margin:0;padding:0;}div.older-home{float:left;width:44%;text-align:left;margin:0;padding:0}div.newer-home{float:right;width:44%;text-align:right;margin:0;padding:0;}div.home{float:left;width:8%;text-align:center;margin:0;padding:0}form,.feedburner-email-form{margin:0;padding:0;}fieldset{border:1px solid #cccccc;width:auto;padding:0.35em 0.625em 0.75em;display:block;}legend{color:#000000;background:#f4f4f4;border:1px solid #cccccc;padding:2px 6px;margin-bottom:15px;}form p{margin:5px 0 0 0;padding:0;}div.xhtml-tags p{margin:0}label{margin-right:0.5em;font-family:arial;cursor:pointer;}input.text,input.textbox,input.password,input.file,input.TextField,textarea{padding:3px;color:#000000;border-top:solid 1px #333333;border-left:solid 1px #333333;border-right:solid 1px #999999;border-bottom:solid 1px #cccccc;background:url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/inputbackgr.gif) top left no-repeat}textarea{width:96%;}input.inputblur{color:#777777;width:95%}input.inputfocus{color:#000000;width:95%}input.highlight,textarea.highlight{background:#e8eff7;border-color:#37699f}.button,.Button,input[type=submit]{padding:0 2px;height:24px;line-height:16px;background-color:#777777;color:#ffffff;border:solid 2px #555555;font-weight:bold}input.buttonhover{padding:0 2px;cursor:pointer;background-color:#6b9c6b;color:#ffffff;border:solid 2px #496d49}form#commentform input#submit{ padding:0 .25em; overflow:visible}form#commentform input#submit[class]{width:auto}form#commentform input#submit{padding:4px 10px 4px 10px;font-size:1.2em;line-height:1.5em;height:36px}table.searchform{width:100%}table.searchform td.searchfield{padding:0;width:100%}table.searchform td.searchbutton{padding:0 0 0 5px}table.searchform td.searchbutton input{padding:0 0 0 5px}blockquote{height:1%;display:block;clear:both;color:#555555;padding:1em 1em;background:#f4f4f4;border:solid 1px #e1e1e1}blockquote blockquote{height:1%;display:block;clear:both;color:#444444;padding:1em 1em;background:#e1e1e1;border:solid 1px #d3d3d3}div.post table{border-collapse:collapse;margin:10px 0}div.post table caption{width:auto;margin:0 auto;background:#eeeeee;border:#999999;padding:4px 8px;color:#666666}div.post table th{background:#888888;color:#ffffff;font-weight:bold;font-size:90%;padding:4px 8px;border:solid 1px #ffffff;text-align:left}div.post table td{padding:4px 8px;background-color:#ffffff;border-bottom:1px solid #dddddd;text-align:left}div.post table tfoot td{}div.post table tr.alt td{background:#f4f4f4}div.post table tr.over td{background:#e2e2e2}#calendar_wrap{padding:0;border:none}table#wp-calendar{width:100%;font-size:90%;border-collapse:collapse;background-color:#ffffff;margin:0 auto}table#wp-calendar caption{width:auto;background:#eeeeee;border:none;;padding:3px;margin:0 auto;font-size:1em}table#wp-calendar th{border:solid 1px #eeeeee;background-color:#999999;color:#ffffff;font-weight:bold;padding:2px;text-align:center}table#wp-calendar td{padding:0;line-height:18px;background-color:#ffffff;border:1px solid #dddddd;text-align:center}table#wp-calendar tfoot td{border:solid 1px #eeeeee;background-color:#eeeeee}table#wp-calendar td a{display:block;background-color:#eeeeee;width:100%;height:100%;padding:0}div#respond{margin:25px 0;padding:25px;background:#eee;-moz-border-radius:8px;-khtml-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}p.thesetags{margin:10px 0}h3.reply,h3#reply-title{margin:0;padding:0 0 10px 0}ol.commentlist{margin:15px 0 25px 0;list-style-type:none;padding:0;display:block;border-top:dotted 1px #cccccc}ol.commentlist li{padding:15px 10px;display:block;height:1%;margin:0;background-color:#FFFFFF;border-bottom:dotted 1px #cccccc}ol.commentlist li.alt{display:block;height:1%;background-color:#EEEEEE;border-bottom:dotted 1px #cccccc}ol.commentlist li.authorcomment{display:block;height:1%;background-color:#D8D8FA}ol.commentlist span.authorname{font-weight:bold;font-size:110%}ol.commentlist span.commentdate{color:#666666;font-size:90%;margin-bottom:5px;display:block}ol.commentlist span.editcomment{display:block}ol.commentlist li p{margin:2px 0 5px 0}div.comment-number{float:right;font-size:2em;line-height:2em;font-family:georgia,serif;font-weight:bold;color:#ddd;margin:-10px 0 0 0;position:relative;height:1%}div.comment-number a:link,div.comment-number a:visited,div.comment-number a:active{color:#ccc}textarea#comment{width:98%;margin:10px 0;display:block}ul.commentlist{margin:15px 0 15px 0;list-style-type:none;padding:0;display:block;border-top:dotted 1px #cccccc}ul.commentlist ul{margin:0;border:none;list-style-type:none;padding:0}ul.commentlist li{padding:0; margin:0;display:block;clear:both;height:1%;}ul.commentlist ul.children li{ margin-left:30px}ul.commentlist div.comment-container{padding:10px;margin:0}ul.children div.comment-container{background-color:transparent;border:dotted 1px #ccc;padding:10px;margin:0 10px 8px 0; border-radius:5px}ul.children div.bypostauthor{}ul.commentlist li.thread-even{background-color:#FFFFFF;border-bottom:dotted 1px #cccccc}ul.commentlist li.thread-odd{background-color:#EEEEEE;border-bottom:dotted 1px #cccccc}ul.commentlist div.bypostauthor{background-color:#D8D8FA}ul.children div.bypostauthor{border:dotted 1px #BFBCFB}ul.commentlist span.authorname{font-size:110%}div.comment-meta a:link,div.comment-meta a:visited,div.comment-meta a:active,div.comment-meta a:hover{font-weight:normal}div#cancel-comment-reply{margin:-5px 0 10px 0}div.comment-number{float:right;font-size:2em;line-height:2em;font-family:georgia,serif;font-weight:bold;color:#ddd;margin:-10px 0 0 0;position:relative;height:1%}div.comment-number a:link,div.comment-number a:visited,div.comment-number a:active{color:#ccc}.page-numbers{padding:2px 6px;border:solid 1px #000000;border-radius:6px}span.current{background:#ddd}a.prev,a.next{border:none}a.page-numbers:link,a.page-numbers:visited,a.page-numbers:active{text-decoration:none;color:#365DA0;border-color:#365DA0}a.page-numbers:hover{text-decoration:none;color:#365DA0;border-color:#365DA0}div.xhtml-tags{display:none}abbr em{border:none !important;border-top:dashed 1px #aaa !important;display:inline-block !important;background:url(http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/commentluv.gif) 0% 90% no-repeat;margin-top:8px;padding:5px 5px 2px 20px !important;font-style:normal}p.subscribe-to-comments{margin-bottom:10px}div#gsHeader{display:none;}div.g2_column{margin:0 !important;width:100% !important;font-size:1.2em}div#gsNavBar{border-top-width:0 !important}p.giDescription{font-size:1.2em;line-height:1 !important}p.giTitle{margin:0.3em 0 !important;font-size:1em;font-weight:normal;color:#666}div#wp-email img{border:0;padding:0}div#wp-email input,div#wp-email textarea{margin-top:5px;margin-bottom:2px}div#wp-email p{margin-bottom:10px}input#wp-email-submit{ padding:0; font-size:30px; height:50px; line-height:50px; overflow:visible;}img.WP-EmailIcon{ vertical-align:text-bottom !important}.tw-accordion .tw-widgettitle,.tw-accordion .tw-widgettitle:hover,.tw-accordion .tw-hovered,.tw-accordion .selected,.tw-accordion .selected:hover{ background:transparent !important; background-image:none !important}.tw-accordion .tw-widgettitle span{ padding-left:0 !important}.tw-accordion h3.tw-widgettitle{border-bottom:solid 1px #ccc}.tw-accordion h3.selected{border-bottom:none}td#left .without_title,td#right .without_title{ margin-top:0;margin-bottom:0}ul.tw-nav-list{border-bottom:solid 1px #999;display:block;margin-bottom:5px !important}td#left ul.tw-nav-list li,td#right ul.tw-nav-list li{padding:0 0 1px 0;margin:0 0 -1px 5px; border:solid 1px #ccc;border-bottom:none;border-radius:5px;border-bottom-right-radius:0;border-bottom-left-radius:0;background:#eee}td#left ul.tw-nav-list li.ui-tabs-selected,td#right ul.tw-nav-list li.ui-tabs-selected{ background:none;border:solid 1px #999;border-bottom:solid 1px #fff !important}ul.tw-nav-list li a:link,ul.tw-nav-list li a:visited,ul.tw-nav-list li a:active,ul.tw-nav-list li a:hover{padding:0 8px !important;background:none;border-left:none !important;outline:none}td#left ul.tw-nav-list li.ui-tabs-selected a,td#left li.ui-tabs-selected a:hover,td#right ul.tw-nav-list li.ui-tabs-selected a,td#right li.ui-tabs-selected a:hover{ color:#000000; text-decoration:none;font-weight:bold;background:none !important;outline:none}td#left .ui-tabs-panel,td#right .ui-tabs-panel{ margin:0; padding:0}img{border:0}#dbem-location-map img{ background:none !important}.post img{padding:5px;border:solid 1px #dddddd;background-color:#f3f3f3;-moz-border-radius:3px;-khtml-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.post img.size-full{max-width:96%;width:auto;margin:5px 0 5px 0}div.post img[class~=size-full]{height:auto;}.post img.alignleft{float:left;margin:10px 10px 5px 0;}.post img.alignright{float:right;margin:10px 0 5px 10px;}.post img.aligncenter{display:block;margin:10px auto}.aligncenter,div.aligncenter{ display:block; margin-left:auto; margin-right:auto}.alignleft,div.alignleft{float:left;margin:10px 10px 5px 0}.alignright,div.alignright{ float:right; margin:10px 0 5px 10px}div.archives-page img{border:0;padding:0;background:none;margin-bottom:0;vertical-align:-10%}.wp-caption{max-width:96%;width:auto 100%;height:auto;display:block;border:1px solid #dddddd;text-align:center;background-color:#f3f3f3;padding-top:4px;margin:10px 0 0 0;-moz-border-radius:3px;-khtml-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}* html .wp-caption{height:100%;}.wp-caption img{ margin:0 !important; padding:0 !important; border:0 none !important}.wp-caption p.wp-caption-text{font-size:0.8em;line-height:13px;padding:2px 4px 5px;margin:0;color:#666666}img.wp-post-image{float:left;border:0;padding:0;background:none;margin:0 10px 5px 0}img.wp-smiley{ float:none;border:none !important;margin:0 1px -1px 1px;padding:0 !important;background:none !important}img.avatar{float:left;display:block;margin:0 8px 1px 0;padding:3px;border:solid 1px #ddd;background-color:#f3f3f3;-moz-border-radius:3px;-khtml-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}#comment_quicktags{text-align:left;padding:10px 0 2px 0;display:block}#comment_quicktags input.ed_button{background:#f4f4f4;border:2px solid #cccccc;color:#444444;margin:2px 4px 2px 0;width:auto;padding:0 4px;height:24px;line-height:16px}#comment_quicktags input.ed_button_hover{background:#dddddd;border:2px solid #666666;color:#000000;margin:2px 4px 2px 0;width:auto;padding:0 4px;height:24px;line-height:16px;cursor:pointer}#comment_quicktags #ed_strong{font-weight:bold}#comment_quicktags #ed_em{font-style:italic}@media print{body{background:white;color:black;margin:0;font-size:10pt !important;font-family:arial,sans-serif;}div.post-footer{line-height:normal !important;color:#555 !important;font-size:9pt !important}a:link,a:visited,a:active,a:hover{text-decoration:underline !important;color:#000}h2{color:#000;font-size:14pt !important;font-weight:normal !important}h3{color:#000;font-size:12pt !important;}#header,#footer,.colone,.colone-inner,.colthree-inner,.colthree,.navigation,.navigation-top,.navigation-middle,.navigation-bottom,.wp-pagenavi-navigation,#comment,#respond,.remove-for-print{display:none}td#left,td#right,td#left-inner,td#right-inner{width:0;display:none}td#middle{width:100% !important;display:block}*:lang(en) td#left{ display:none}*:lang(en) td#right{ display:none}*:lang(en) td#left-inner{ display:none}*:lang(en) td#right-inner{ display:none}td#left:empty{ display:none}td#right:empty{ display:none}td#left-inner:empty{ display:none}td#right-inner:empty{ display:none}}ul.rMenu,ul.rMenu ul,ul.rMenu li,ul.rMenu a{display:block;margin:0;padding:0}ul.rMenu,ul.rMenu li,ul.rMenu ul{list-style:none}ul.rMenu ul{display:none}ul.rMenu li{position:relative;z-index:1}ul.rMenu li:hover{z-index:999}ul.rMenu li:hover > ul{display:block;position:absolute}ul.rMenu li:hover{background-position:0 0} ul.rMenu-hor li{float:left;width:auto}ul.rMenu-hRight li{float:right}ul.sub-menu li,ul.rMenu-ver li{float:none}.clearfix:after{ content:".";display:block;height:0;clear:both;visibility:hidden}.clearfix{min-width:0;display:inline-block;display:block}* html .clearfix{height:1%;}.clearboth{clear:both;height:1%;font-size:1%;line-height:1%;display:block;padding:0;margin:0}.page-id-8 .post-headline{display:none;} div.useCode{background:linear-gradient(#FFFF66,#CCCC00);border-radius:8px;padding-left:10px;padding-right:10px;padding-top:2px;padding-bottom:2px;font-size:10pt;text-align:left;display:inline-block;font-weight:550;}td#header{padding-bottom:15px;}td#middle{padding:0}div.searchbox-form{margin:5px 0 15px 5px}div#menu1 ul.rMenu{background:transparent;border:none}div#imagecontainer{border-top:solid 0px #333;border-bottom:solid 5px #333;}div.widget ul li{padding:1px 5px 1px 12px !important;background:url('<?php bloginfo('template_directory');?>/images/bullets/round-gray.gif') no-repeat 0 7px}ul.rMenu-hor ul,ul.rMenu-hRight ul{margin-top:0px;}ul.rMenu-hor li{margin-bottom:0px;margin-top:0px;margin-left:0px;}ul.rMenu-hor{padding-left:0px;}ul.rMenu-ver li{margin-top:0xp;}div#menu1 ul.rMenu li a,div#menu2 ul.rMenu li a{padding:6px 10px}div#menu1 ul.rMenu li{margin-right:5px}div#menu1 ul.rMenu li li{margin-right:0}div#menu1 ul.rMenu li,div#menu1 ul.rMenu li a{-webkit-border-top-left-radius:5px;-webkit-border-top-right-radius:5px;-moz-border-radius-topleft:5px;-moz-border-radius-topright:5px;border-top-left-radius:5px;border-top-right-radius:5px}div#menu1 ul.rMenu li li,div#menu1 ul.rMenu li li a{-webkit-border-top-left-radius:0;-webkit-border-top-right-radius:0;-moz-border-radius-topleft:0;-moz-border-radius-topright:0;border-top-left-radius:0;border-top-right-radius:0}div#menu2{ border:dashed 1px #ffffff}ul{list-style-position:inside}</style>
<script type="text/javascript">
//<![CDATA[



/* JQUERY */
jQuery(document).ready(function(){ 
    
   
  

	/* jQuery('ul#rmenu').superfish(); */
	/* jQuery('ul#rmenu').superfish().find('ul').bgIframe({opacity:false}); */
 
	/* For IE6 */
	if (jQuery.browser.msie && /MSIE 6\.0/i.test(window.navigator.userAgent) && !/MSIE 7\.0/i.test(window.navigator.userAgent) && !/MSIE 8\.0/i.test(window.navigator.userAgent)) {

		/* Max-width for images in IE6 */		
		var centerwidth = jQuery("td#middle").width(); 
		
		/* Images without caption */
		jQuery(".post img").each(function() { 
			var maxwidth = centerwidth - 10 + 'px';
			var imgwidth = jQuery(this).width(); 
			var imgheight = jQuery(this).height(); 
			var newimgheight = (centerwidth / imgwidth * imgheight) + 'px';	
			if (imgwidth > centerwidth) { 
				jQuery(this).css({width: maxwidth}); 
				jQuery(this).css({height: newimgheight}); 
			}
		});
		
		/* Images with caption */
		jQuery("div.wp-caption").each(function() { 
			var captionwidth = jQuery(this).width(); 
			var maxcaptionwidth = centerwidth + 'px';
			var captionheight = jQuery(this).height();
			var captionimgwidth =  jQuery("div.wp-caption img").width();
			var captionimgheight =  jQuery("div.wp-caption img").height();
			if (captionwidth > centerwidth) { 
				jQuery(this).css({width: maxcaptionwidth}); 
				var newcaptionheight = (centerwidth / captionwidth * captionheight) + 'px';
				var newcaptionimgheight = (centerwidth / captionimgwidth * captionimgheight) + 'px';
				jQuery(this).css({height: newcaptionheight}); 
				jQuery("div.wp-caption img").css({height: newcaptionimgheight}); 
				}
		});
		
		/* sfhover for LI:HOVER support in IE6: */
		jQuery("ul li").
			hover( function() {
					jQuery(this).addClass("sfhover")
				}, 
				function() {
					jQuery(this).removeClass("sfhover")
				} 
			); 

	/* End IE6 */
	}
	
	
	
	/* Since 3.7.8: Auto resize videos (embed and iframe elements) 
	TODO: Parse parent's dimensions only once per layout column, not per video
	*/
	function bfa_resize_video() {
		jQuery('embed, iframe').each( function() {
			var video = jQuery(this),
			videoWidth = video.attr('width'); // use the attr here, not width() or css()
			videoParent = video.parent(),
			videoParentWidth = parseFloat( videoParent.css( 'width' ) ),
			videoParentBorder = parseFloat( videoParent.css( 'border-left-width' ) ) 
										+  parseFloat( videoParent.css( 'border-right-width' ) ),
			videoParentPadding = parseFloat( videoParent.css( 'padding-left' ) ) 
										+  parseFloat( videoParent.css( 'padding-right' ) ),
			maxWidth = videoParentWidth - videoParentBorder - videoParentPadding;

			if( videoWidth > maxWidth ) {
				var videoHeight = video.attr('height'),
				videoMaxHeight = ( maxWidth / videoWidth * videoHeight );
				video.attr({ width: maxWidth, height: videoMaxHeight });
			} 

		});	
	}
	bfa_resize_video();
	jQuery(window).resize( bfa_resize_video );

		
	jQuery(".post table tr").
		mouseover(function() {
			jQuery(this).addClass("over");
		}).
		mouseout(function() {
			jQuery(this).removeClass("over");
		});

	
	jQuery(".post table tr:even").
		addClass("alt");

	
	jQuery("input.text, input.TextField, input.file, input.password, textarea").
		focus(function () {  
			jQuery(this).addClass("highlight"); 
		}).
		blur(function () { 
			jQuery(this).removeClass("highlight"); 
		})
	
	jQuery("input.inputblur").
		focus(function () {  
			jQuery(this).addClass("inputfocus"); 
		}).
		blur(function () { 
			jQuery(this).removeClass("inputfocus"); 
		})

		

	
	jQuery("input.button, input.Button, input#submit").
		mouseover(function() {
			jQuery(this).addClass("buttonhover");
		}).
		mouseout(function() {
			jQuery(this).removeClass("buttonhover");
		});

	/* toggle "you can use these xhtml tags" */
	jQuery("a.xhtmltags").
		click(function(){ 
			jQuery("div.xhtml-tags").slideToggle(300); 
		});

	/* For the Tabbed Widgets plugin: */
	jQuery("ul.tw-nav-list").
		addClass("clearfix");

		
	
});

//]]>
</script>

<!--[if IE 6]>
<script type="text/javascript">DD_roundies.addRule("a.posts-icon, a.comments-icon, a.email-icon, img.logo");</script>
<![endif]-->

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="9.12 -- Shallow vs. deep copying" />
<meta property="og:url" content="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/" />
<meta property="og:description" content="In the previous lesson on The copy constructor and overloading the assignment operator, you learned about the differences and similarities of the copy constructor and the assignment operator. This ..." />
<meta property="article:published_time" content="2007-11-09T23:39:53+00:00" />
<meta property="article:modified_time" content="2007-11-09T23:39:53+00:00" />
<meta property="article:author" content="http://www.learncpp.com/author/alex/" />
<meta property="og:site_name" content="Learn C++" />
<meta property="og:image" content="http://www.learncpp.com/images/CppTutorial/next.png" />
<meta property="og:image" content="http://www.learncpp.com/images/CppTutorial/up.png" />
<meta property="og:image" content="http://www.learncpp.com/images/CppTutorial/prev.png" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:image" content="http://www.learncpp.com/images/CppTutorial/next.png?w=240" />
<meta name="twitter:card" content="summary" />
</head>
<body class="single single-post postid-151 single-format-standard category-cpp-tutorial">

		<!-- Full Width Header -->
		<div id="header" class="full-width">
		<div id="imagecontainer-pre" class="header-image-container-pre">    <div id="imagecontainer" class="header-image-container" style="background: url('http://www.learncpp.com/blog/wp-content/ata-images/header/LearnCppHeader3_800.jpg') top center no-repeat;"></div><div class="clickable"><a class="divclick" title="Learn C++" href ="http://www.learncpp.com/">&nbsp;</a></div><div class="codeoverlay"></div></div>		</div>
		<!-- / Full Width Header -->
<div id="wrapper">
<div id="container">
<table id="layout" border="0" cellspacing="0" cellpadding="0">
<colgroup>
<col class="colone" /><col class="coltwo" />
<col class="colthree" /></colgroup> 

	<!-- Main Body -->	
	<tr id="bodyrow">

				<!-- Left Sidebar -->
		<td id="left">

			<div id="text-2" class="widget widget_text">			<div class="textwidget"><ul>
<li><a href="/"><big><big>Main Page</big></big></a>
<li><a href="
/featured-articles/">Featured Articles</a>
</ul>
<hr>
<ul>
<li><a href="/site-news/find-something-wrong/">Report an Issue</a>
<li><a href="/about/">About / Contact</a>
<li><a href="/about/#Support">Support LearnCpp</a>
</ul>
</div>
		</div><div id="text-3" class="widget widget_text"><div class="widget-title"><h3>Search</h3></div>			<div class="textwidget"><!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0" bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="center">

<!--<br/>-->
<input type="hidden" name="domains" value="LearnCpp.com"></input>
<label for="sbi" style="display: none">Enter your search terms</label>
<input type="text" name="q" size="16" maxlength="255" value="" id="sbi"></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="hidden" name="sitesearch" value="www.LearnCpp.com" checked id="ss1"></input>
<label for="ss1" title="Search LearnCpp.com"></label></td>
</tr>
</table>
<label for="sbb" style="display: none">Submit search form</label>
<input type="submit" name="sa" value="Google Search" id="sbb"></input>
<input type="hidden" name="client" value="pub-0588844875925051"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="channel" value="7774154974"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="safe" value="active"></input>
<input type="hidden" name="flav" value="0000"></input>
<input type="hidden" name="sig" value="q6fLrjobHHgL00cW"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google --></div>
		</div>    
<!-- 
	Plugin: Custom Meta Widget	Plugin URL: http://shinraholdings.com/plugins/custom-meta-widget/-->


	<div id="custommetawidget-2" class="widget customMetaWidget">	<div class="widget-title"><h3>Meta</h3></div>	<ul>
	
	
    <li><a href="http://www.learncpp.com/blog/wp-login.php">Log in</a></li>	
	</ul>
    
	</div><div id="text-9" class="widget widget_text">			<div class="textwidget"><div class="cf_monitor">
<script type="text/javascript">
    google_ad_client = "ca-pub-0588844875925051";
    google_ad_slot = "2780990843";
    google_ad_width = 160;
    google_ad_height = 600;
</script>
<!-- Post - Left Sidebar - Wide Skyscraper -->
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
		</div>
		</td>
		<!-- / Left Sidebar -->
		
				

		<!-- Main Column -->
		<td id="middle">

    
		
	<div class='code-block code-block-1' style='float:left;margin:8px 8px 8px 0px;'><div class="cf_monitor">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-0588844875925051";
/* Content Page Top Large */
google_ad_slot = "7945645163";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>	
								<div class="post-151 post type-post status-publish format-standard hentry category-cpp-tutorial odd" id="post-151">
						<div class="post-headline">		<h1>9.12 &#8212; Shallow vs. deep copying</h1>
		</div>		<div class="post-byline">By Alex, on November 9th, 2007</div>		<div class="post-bodycopy clearfix"><p>In the previous lesson on <a href="http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/">The copy constructor and overloading the assignment operator</a>, you learned about the differences and similarities of the copy constructor and the assignment operator.  This lesson is a follow-up to that one.</p>
<p><strong>Shallow copying</strong></p>
<p>Because C++ does not know much about your class, the default copy constructor and default assignment operators it provides use a copying method known as a shallow copy (also known as a memberwise copy).  A <strong>shallow copy</strong> means that C++ copies each member of the class individually using the assignment operator.  When classes are simple (eg. do not contain any dynamically allocated memory), this works very well.</p>
<p>For example, let&#8217;s take a look at our Cents class:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9718317971469" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9718317971469-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9718317971469-2">2</div><div class="crayon-num" data-line="crayon-555d734bb9718317971469-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9718317971469-4">4</div><div class="crayon-num" data-line="crayon-555d734bb9718317971469-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9718317971469-6">6</div><div class="crayon-num" data-line="crayon-555d734bb9718317971469-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9718317971469-8">8</div><div class="crayon-num" data-line="crayon-555d734bb9718317971469-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9718317971469-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9718317971469-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Cents</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9718317971469-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bb9718317971469-3"><span class="crayon-m">private</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9718317971469-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">m_nCents</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9718317971469-5"><span class="crayon-m">public</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9718317971469-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Cents</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">nCents</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bb9718317971469-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9718317971469-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_nCents</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">nCents</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9718317971469-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9718317971469-10"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p>When C++ does a shallow copy of this class, it will copy m_nCents using the standard integer assignment operator.  Since this is exactly what we&#8217;d be doing anyway if we wrote our own copy constructor or overloaded assignment operator, there&#8217;s really no reason to write our own version of these functions!</p>
<p>However, when designing classes that handle dynamically allocated memory, memberwise (shallow) copying can get us in a lot of trouble!  This is because the standard pointer assignment operator just copies the address of the pointer -- it does not allocate any memory or copy the contents being pointed to!</p>
<p>Let&#8217;s take a look at an example of this:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb972a681153111" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb972a681153111-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-2">2</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-4">4</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-6">6</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-8">8</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-10">10</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-12">12</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-14">14</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-16">16</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-18">18</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-20">20</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-22">22</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-24">24</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-26">26</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-28">28</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-30">30</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-32">32</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb972a681153111-34">34</div><div class="crayon-num" data-line="crayon-555d734bb972a681153111-35">35</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb972a681153111-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">MyString</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-3"><span class="crayon-m">private</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-6"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-7"><span class="crayon-m">public</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MyString</span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-v">pchString</span><span class="crayon-o">=</span><span class="crayon-s">""</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Find the length of the string</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Plus one character for a terminator</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_nLength</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">strlen</span><span class="crayon-sy">(</span><span class="crayon-v">pchString</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Allocate a buffer equal to this length</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Copy the parameter into our internal buffer</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">strncpy</span><span class="crayon-sy">(</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Make sure the string is terminated</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">[</span><span class="crayon-v">m_nLength</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'\0'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-23"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">~</span><span class="crayon-e">MyString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-c">// destructor</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// We need to deallocate our buffer</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-28"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Set m_pchString to null just in case</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-32"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">char</span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">GetString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb972a681153111-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">GetLength</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-555d734bb972a681153111-35"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0043 seconds] -->
<p></p>
<p>The above is a simple string class that allocates memory to hold a string that we pass in.  Note that we have not defined a copy constructor or overloaded assignment operator.  Consequently, C++ will provide a default copy constructor and default assignment operator that do a shallow copy.</p>
<p>Now, consider the following snippet of code:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9733626417067" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9733626417067-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9733626417067-2">2</div><div class="crayon-num" data-line="crayon-555d734bb9733626417067-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9733626417067-4">4</div><div class="crayon-num" data-line="crayon-555d734bb9733626417067-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9733626417067-6">6</div><div class="crayon-num" data-line="crayon-555d734bb9733626417067-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9733626417067-1"><span class="crayon-e">MyString </span><span class="crayon-e">cHello</span><span class="crayon-sy">(</span><span class="crayon-s">"Hello, world!"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9733626417067-2">&nbsp;</div><div class="crayon-line" id="crayon-555d734bb9733626417067-3"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9733626417067-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MyString </span><span class="crayon-v">cCopy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cHello</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// use default copy constructor</span></div><div class="crayon-line" id="crayon-555d734bb9733626417067-5"><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-c">// cCopy goes out of scope here</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9733626417067-6">&nbsp;</div><div class="crayon-line" id="crayon-555d734bb9733626417067-7"><span class="crayon-v">std</span><span class="crayon-o">::</span><span class="crayon-r">cout</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-v">cHello</span><span class="crayon-sy">.</span><span class="crayon-e">GetString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-v">std</span><span class="crayon-o">::</span><span class="crayon-v">endl</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// this will crash</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p>While this code looks harmless enough, it contains an insidious problem that will cause the program to crash!  Can you spot it?  Don&#8217;t worry if you can&#8217;t, it&#8217;s rather subtle.</p>
<p>Let&#8217;s break down this example line by line:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9739463663792" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9739463663792-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9739463663792-1"><span class="crayon-e">MyString </span><span class="crayon-e">cHello</span><span class="crayon-sy">(</span><span class="crayon-s">"Hello, world!"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>This line is harmless enough.  This calls the MyString constructor, which allocates some memory, sets cHello.m_pchString to point to it, and then copies the string &#8220;Hello, world!&#8221; into it.</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9740547896544" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9740547896544-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9740547896544-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MyString </span><span class="crayon-v">cCopy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cHello</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// use default copy constructor</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p></p>
<p>This line seems harmless enough as well, but it&#8217;s actually the source of our problem!  When this line is evaluated, C++ will use the default copy constructor (because we haven&#8217;t provided our own), which does a shallow pointer copy on cHello.m_pchString.  Because a shallow pointer copy just copies the address of the pointer, the address of cHello.m_pchString is copied into cCopy.m_pchString.  As a result, cCopy.m_pchString and cHello.m_pchString are now both pointing to the same piece of memory!</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9746298632993" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9746298632993-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9746298632993-1"><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-c">// cCopy goes out of scope here</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>When cCopy goes out of scope, the MyString destructor is called on cCopy.  The destructor deletes the dynamically allocated memory that both cCopy.m_pchString and cHello.m_pchString are pointing to!  Consequently, by deleting cCopy, we&#8217;ve also (inadvertently) affected cHello.  Note that the destructor will set cCopy.m_pchString to 0, but cHello.m_pchString will be left pointing to the deleted (invalid) memory!</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb974d062502052" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb974d062502052-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb974d062502052-1"><span class="crayon-v">std</span><span class="crayon-o">::</span><span class="crayon-r">cout</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-v">cHello</span><span class="crayon-sy">.</span><span class="crayon-e">GetString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-v">std</span><span class="crayon-o">::</span><span class="crayon-v">endl</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// this will crash</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>Now you can see why this crashes.  We deleted the string that cHello was pointing to, and now we are trying to print the value of memory that is no longer allocated.</p>
<p>The root of this problem is the shallow copy done by the copy constructor -- doing a shallow copy on pointer values in a copy constructor or overloaded assignment operator is almost always asking for trouble.</p>
<p><strong>Deep copying</strong></p>
<p>The answer to this problem is to do a deep copy on any non-null pointers being copied.  A <strong>deep copy</strong> duplicates the object or variable being pointed to so that the destination (the object being assigned to) receives it&#8217;s own local copy.  This way, the destination can do whatever it wants to it&#8217;s local copy and the object that was copied from will not be affected.  Doing deep copies requires that we write our own copy constructors and overloaded assignment operators.</p>
<p>Let&#8217;s go ahead and show how this is done for our MyString class:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9754067253152" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9754067253152-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-2">2</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-4">4</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-6">6</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-8">8</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-10">10</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-12">12</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-14">14</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-16">16</div><div class="crayon-num" data-line="crayon-555d734bb9754067253152-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9754067253152-18">18</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9754067253152-1"><span class="crayon-c">// Copy constructor</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-2"><span class="crayon-v">MyString</span><span class="crayon-o">::</span><span class="crayon-e">MyString</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bb9754067253152-3"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// because m_nLength is not a pointer, we can shallow copy it</span></div><div class="crayon-line" id="crayon-555d734bb9754067253152-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_nLength</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-6">&nbsp;</div><div class="crayon-line" id="crayon-555d734bb9754067253152-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// m_pchString is a pointer, so we need to deep copy it if it is non-null</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bb9754067253152-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// allocate memory for our copy</span></div><div class="crayon-line" id="crayon-555d734bb9754067253152-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-12">&nbsp;</div><div class="crayon-line" id="crayon-555d734bb9754067253152-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Copy the string into our newly allocated memory</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">strncpy</span><span class="crayon-sy">(</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9754067253152-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-555d734bb9754067253152-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9754067253152-18"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->
<p></p>
<p>As you can see, this is quite a bit more involved than a simple shallow copy!  First, we have to check to make sure cSource even has a string (line 8).  If it does, then we allocate enough memory to hold a copy of that string (line 11).  Finally, we have to manually copy the string using strncpy() (line 14).</p>
<p>Now let&#8217;s do the overloaded assignment operator.  The overloaded assignment operator is a tad bit trickier:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb975c626938852" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb975c626938852-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-2">2</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-4">4</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-6">6</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-8">8</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-10">10</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-12">12</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-14">14</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-16">16</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-18">18</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-20">20</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-22">22</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-24">24</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb975c626938852-26">26</div><div class="crayon-num" data-line="crayon-555d734bb975c626938852-27">27</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb975c626938852-1"><span class="crayon-c">// Assignment operator</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-2"><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">::</span><span class="crayon-t">operator</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-3"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// check for self-assignment</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">&amp;cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-r">this</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// first we need to deallocate any value that this string is holding!</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-10">&nbsp;</div><div class="crayon-line" id="crayon-555d734bb975c626938852-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// because m_nLength is not a pointer, we can shallow copy it</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_nLength</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// now we need to deep copy m_pchString</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// allocate memory for our copy</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Copy the parameter the newly allocated memory</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">strncpy</span><span class="crayon-sy">(</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb975c626938852-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-r">this</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb975c626938852-27"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0033 seconds] -->
<p></p>
<p>Note that our assignment operator is very similar to our copy constructor, but there are three major differences:</p>
<ul>
<li> We added a self-assignment check (line 5).
<li> We return *this so we can chain the assignment operator (line 26).
<li> We need to explicitly deallocate any value that the string is already holding (line 9).
</ul>
<p>When the overloaded assignment operator is called, the item being assigned to may already contain a previous value, which we need to make sure we clean up before we assign memory for new values.  For non-dynamically allocated variables (which are a fixed size), we don&#8217;t have to bother because the new value just overwrite the old one.  However, for dynamically allocated variables, we need to explicitly deallocate any old memory before we allocate any new memory.  If we don&#8217;t, the code will not crash, but we will have a memory leak that will eat away our free memory every time we do an assignment!</p>
<p><strong>Checking for self-assignment</strong></p>
<p>In our overloaded assignment operators, the first thing we do is check for self assignment.  There are two reasons for this.  One is simple efficiency: if we don&#8217;t need to make a copy, why make one?  The second reason is because not checking for self-assignment when doing a deep copy will cause problems if the class uses dynamically allocated memory.  Let&#8217;s take a look at an example of this.</p>
<p>Consider the following overloaded assignment operator that does not do a self-assignment check:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9764490008524" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9764490008524-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-2">2</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-4">4</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-6">6</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-8">8</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-10">10</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-12">12</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-14">14</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-16">16</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-18">18</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-20">20</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-22">22</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9764490008524-24">24</div><div class="crayon-num" data-line="crayon-555d734bb9764490008524-25">25</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9764490008524-1"><span class="crayon-c">// Problematic assignment operator</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-2"><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">::</span><span class="crayon-t">operator</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-3"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Note: No check for self-assignment!</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// first we need to deallocate any value that this string is holding!</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-8">&nbsp;</div><div class="crayon-line" id="crayon-555d734bb9764490008524-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// because m_nLength is not a pointer, we can shallow copy it</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_nLength</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// now we need to deep copy m_pchString</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// allocate memory for our copy</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Copy the parameter the newly allocated memory</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">strncpy</span><span class="crayon-sy">(</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9764490008524-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-r">this</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9764490008524-25"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0032 seconds] -->
<p></p>
<p>What happens when we do the following?</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb976b145354771" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb976b145354771-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb976b145354771-1"><span class="crayon-v">cHello</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cHello</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>This statement will call our overloaded assignment operator.  The <i>this</i> pointer will point to the address of cHello (because it&#8217;s the left operand), and cSource will be a reference to cHello (because it&#8217;s the right operand).  Consequently, m_pchString is the same as cSource.m_pchString.  </p>
<p>Now look at the first line of code that would be executed: <code>delete[] m_pchString;</code>.  </p>
<p>This line is meant to deallocate any previously allocated memory in cHello so we can copy the new string from the source without a memory leak.  However, in this case, when we delete m_pchString, we also delete cSource.m_pchString!  We&#8217;ve now destroyed our source string, and have lost the information we wanted to copy in the first place.  The rest of the code will allocate a new string, then copy the uninitialized garbage in that string to itself.  As a final result, you will end up with a new string of the correct length that contain garbage characters.</p>
<p>The self-assignment check prevents this from happening.</p>
<p><strong>Preventing copying</strong></p>
<p>Sometimes we simply don&#8217;t want our classes to be copied at all.  The best way to do this is to add the prototypes for the copy constructor and overloaded operator= to the private section of your class.</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bb9773604421667" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bb9773604421667-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9773604421667-2">2</div><div class="crayon-num" data-line="crayon-555d734bb9773604421667-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9773604421667-4">4</div><div class="crayon-num" data-line="crayon-555d734bb9773604421667-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9773604421667-6">6</div><div class="crayon-num" data-line="crayon-555d734bb9773604421667-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9773604421667-8">8</div><div class="crayon-num" data-line="crayon-555d734bb9773604421667-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bb9773604421667-10">10</div><div class="crayon-num" data-line="crayon-555d734bb9773604421667-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bb9773604421667-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">MyString</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9773604421667-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bb9773604421667-3"><span class="crayon-m">private</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9773604421667-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9773604421667-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9773604421667-6"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-555d734bb9773604421667-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MyString</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9773604421667-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-t">operator</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bb9773604421667-9"><span class="crayon-m">public</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bb9773604421667-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Rest of code here</span></div><div class="crayon-line" id="crayon-555d734bb9773604421667-11"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p></p>
<p>In this case, C++ will not automatically create a default copy constructor and default assignment operator, because we&#8217;ve told the compiler we&#8217;re defining our own functions.  Furthermore, any code located outside the class will not be able to access these functions because they&#8217;re private.</p>
<p><strong>Summary</strong></p>
<ul>
<li>The default copy constructor and default assignment operators do shallow copies, which is fine for classes that contain no dynamically allocated variables.
<li>Classes with dynamically allocated variables need to have a copy constructor and assignment operator that do a deep copy.
<li>The assignment operator is usually implemented using the same code as the copy constructor, but it checks for self-assignment, returns *this, and deallocates any previously allocated memory before deep copying.
<li>If you don&#8217;t want a class to be copyable, use a private copy constructor and assignment operator prototype in the class header.
</ul>
<table border=0 cellpadding=3>
<tr>
<td>
        <a href="http://www.learncpp.com/cpp-tutorial/101-constructor-initialization-lists/" style="text-decoration:none"><img src="http://www.learncpp.com/images/CppTutorial/next.png" align=middle> 10.1 -- Constructor initialization lists</a>
</td>
</tr>
<tr>
<td>
        <a href="http://www.learncpp.com/#Chapter9" style="text-decoration:none"><img src="http://www.learncpp.com/images/CppTutorial/up.png" align=middle> Index</a>
</td>
</tr>
<tr>
<td>
        <a href="http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/" style="text-decoration:none"><img src="http://www.learncpp.com/images/CppTutorial/prev.png" align=middle> 9.11 -- The copy constructor and overloading the assignment operator</a>
</td>
</tr>
</table>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-email"><a rel="nofollow" data-shared="" class="share-email sd-button share-icon" href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/?share=email" target="_blank" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-151" class="share-facebook sd-button share-icon" href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/?share=facebook" target="_blank" title="Share on Facebook"><span>Facebook</span></a></li><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-151" class="share-twitter sd-button share-icon" href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/?share=twitter" target="_blank" title="Click to share on Twitter"><span>Twitter</span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-151" class="share-google-plus-1 sd-button share-icon" href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/?share=google-plus-1" target="_blank" title="Click to share on Google+"><span>Google</span></a></li><li class="share-pinterest"><a rel="nofollow" data-shared="sharing-pinterest-151" class="share-pinterest sd-button share-icon" href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/?share=pinterest" target="_blank" title="Click to share on Pinterest"><span>Pinterest</span></a></li><li class="share-end"></li></ul></div></div></div><div class='code-block code-block-2' style='float:left;margin:8px 8px 8px 0px;'><div class="cf_monitor">
<div id="171844866">
    <script type="text/javascript">
    try {
        window._mNHandle.queue.push(function () {
		    window._mNDetails.loadTag("171844866", "336x280", "171844866");
		    });
		}
    catch (error) {}
	</script>
</div>
</div></div></div>						<div class="post-footer"><img src="http://www.learncpp.com/blog/wp-content/themes/atahualpa/images/icons/folder-gray.gif" alt="" /> <a class="cpp-tutorial" href="http://www.learncpp.com/category/cpp-tutorial/" title="View all posts in C++ Tutorial">C++ Tutorial</a>   | <a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/print/" title="Print This Post" rel="nofollow"><img class="WP-PrintIcon" src="http://www.learncpp.com/blog/wp-content/plugins/wp-print/images/printer_famfamfam.gif" alt="Print This Post" title="Print This Post" style="border: 0px;" /></a>&nbsp;<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/print/" title="Print This Post" rel="nofollow">Print This Post</a></div>		</div><!-- / Post -->	
						
	
			

	<a name="comments"></a><!-- named anchor for skip links -->
	<h3 id="comments">33 comments to 9.12 &#8212; Shallow vs. deep copying</h3>

	
	<!-- Comment List -->
	<ul class="commentlist">
		
			<li class="comment even thread-even depth-1 clearfix" id="comment-2616">
		<div id="div-comment-2616" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/e8765a201bced99b7a255fba0a2ac665?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/e8765a201bced99b7a255fba0a2ac665?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">sergk</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-2616">
		November 10, 2007 at 4:22 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=2616#respond' onclick='return addComment.moveForm( "comment-2616", "2616", "respond", "151" )' aria-label='Reply to sergk'> &middot; Reply</a></span>		 
		</div>
		<p>I&#8217;d like to note, to avoid problems with inherited classes, one have to make destructor and assignment operators to be virtual.</p>
<p>-- serg.</p>
		</div>
<ul class="children">
		<li class="comment odd alt depth-2 clearfix" id="comment-235916">
		<div id="div-comment-235916" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/129f1aacaccacda66d448db69ac9198c?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/129f1aacaccacda66d448db69ac9198c?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">pavuluri</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-235916">
		December 8, 2014 at 3:06 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=235916#respond' onclick='return addComment.moveForm( "comment-235916", "235916", "respond", "151" )' aria-label='Reply to pavuluri'> &middot; Reply</a></span>		 
		</div>
		<p>Very use full content thank you, for more information about the shallow vs Deep copy refer<a href="http://www.cpptutorials.com/2014/11/copy-constructor-shallow-and-deep.html" onclick="_gaq.push(['_trackEvent', 'outbound-comment', 'http://www.cpptutorials.com/2014/11/copy-constructor-shallow-and-deep.html', ' Copy Constructor, Shallow and Deep Copying in C++ with examples']);" rel="nofollow"> Copy Constructor, Shallow and Deep Copying in C++ with examples</a></p>
		</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1 clearfix" id="comment-6921">
		<div id="div-comment-6921" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a02e953e5f6741f0f8633c05c2ed4421?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a02e953e5f6741f0f8633c05c2ed4421?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://test.com' rel='external nofollow' class='url'>test</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-6921">
		January 31, 2008 at 12:06 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=6921#respond' onclick='return addComment.moveForm( "comment-6921", "6921", "respond", "151" )' aria-label='Reply to test'> &middot; Reply</a></span>		 
		</div>
		<p>&#8220;// Problematic copy constructor&#8221; ==> &#8220;//Problematic assigment operator&#8221;?</p>
<p>[ Fixed!  Thanks.  -Alex ]</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 clearfix" id="comment-7288">
		<div id="div-comment-7288" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/e69bbbbbc25be0ff13b7dd5f7038f504?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/e69bbbbbc25be0ff13b7dd5f7038f504?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Zafer</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-7288">
		February 5, 2008 at 7:42 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=7288#respond' onclick='return addComment.moveForm( "comment-7288", "7288", "respond", "151" )' aria-label='Reply to Zafer'> &middot; Reply</a></span>		 
		</div>
		<p>In the last example, when we say delete [] m_pchString, the program is likely to crash because of </p>
<p>if (cSource.m_pchString)</p>
<p>or </p>
<p>strncpy(m_pchString, cSource.m_pchString, m_nLength)?</p>
<p>When we delete a pointer using delete [], does it still contain a valid memory address?</p>
		</div>
<ul class="children">
		<li class="comment byuser comment-author-alex bypostauthor even depth-2 clearfix" id="comment-7291">
		<div id="div-comment-7291" class="clearfix comment-container bypostauthor">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://www.tarindel.com' rel='external nofollow' class='url'>Alex</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-7291">
		February 5, 2008 at 8:37 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=7291#respond' onclick='return addComment.moveForm( "comment-7291", "7291", "respond", "151" )' aria-label='Reply to Alex'> &middot; Reply</a></span>		 
		</div>
		<p>In the last example, we omitted the check for self-assignment.  This means that if the user does a self-assignment, m_pchString will equal cString.m_pchString.  When we delete m_pchString, we will also delete cString.m_pchString.</p>
<p>When we delete a pointer using delete or delete[], it does not contain a valid memory address any longer.  However, that does not necessarily mean the program will crash if you use the pointer for reading.</p>
<p>Consequently, in the last example, the if statement will succeed because cString.m_pchString is non-zero.  It will then allocate new memory for m_pchString (and cSource.m_pchString).  Then it copies cSource.m_pchString, which is that uninitialized new memory (aka. garbage) into m_pchString, which is itself.</p>
<p>The end result of the self-assignment without the self-assignment check is that you&#8217;ll get a new string of the correct length, but it will be filled with garbage.</p>
		</div>
<ul class="children">
		<li class="comment odd alt depth-3 clearfix" id="comment-7294">
		<div id="div-comment-7294" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/e69bbbbbc25be0ff13b7dd5f7038f504?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/e69bbbbbc25be0ff13b7dd5f7038f504?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Zafer</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-7294">
		February 5, 2008 at 9:15 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=7294#respond' onclick='return addComment.moveForm( "comment-7294", "7294", "respond", "151" )' aria-label='Reply to Zafer'> &middot; Reply</a></span>		 
		</div>
		<p>In that case how can the program crash? Also, it&#8217;s still counterintuitive for a pointer not to contain a valid memory address but point to some garbage region and be copiable.</p>
		</div>
<ul class="children">
		<li class="comment byuser comment-author-alex bypostauthor even depth-4 clearfix" id="comment-7299">
		<div id="div-comment-7299" class="clearfix comment-container bypostauthor">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://www.tarindel.com' rel='external nofollow' class='url'>Alex</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-7299">
		February 5, 2008 at 10:18 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=7299#respond' onclick='return addComment.moveForm( "comment-7299", "7299", "respond", "151" )' aria-label='Reply to Alex'> &middot; Reply</a></span>		 
		</div>
		<p>The way the above code without the self-assignment check is written, the program won&#8217;t crash (it just produces an unexpectedly incorrect result, which in some ways can be worse).  I changed the wording of the text to be more accurate in that regard.  However, any time you are dealing with a pointer to unallocated memory, you are &#8220;living on the edge&#8221; so to speak and are just begging for a crash, corrupted memory, or some other bit of nastiness to happen.</p>
<p>I should be slightly more clear about my terminology -- when I said &#8220;valid memory address&#8221; in the above comment, I really meant &#8220;allocated memory address&#8221;.  Also, to be a bit more clear, accessing an unassigned bit of memory won&#8217;t necessarily cause a crash.  It may or it may not, depending on where the piece of memory is and whether the operating system has protected that memory.  Windows, for example, prevents programs from reading and writing to certain memory addresses in order to prevent malicious code from overwriting parts of the operating system.  If you try to do that, you will get an access violation.</p>
<p>For example, consider the following program:</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbdbb7300199030" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-2">2</div><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-4">4</div><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-6">6</div><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-8">8</div><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-10">10</div><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-12">12</div><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-14">14</div><div class="crayon-num" data-line="crayon-555d734bbdbb7300199030-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbdbb7300199030-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbdbb7300199030-1"><span class="crayon-c">// Assign some memory to pnValue</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-2"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-v">pnValue</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbdbb7300199030-3"><span class="crayon-c">// Write a value into that memory.&nbsp;&nbsp;This is fine</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-4"><span class="crayon-o">*</span><span class="crayon-v">pnValue</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbdbb7300199030-5"><span class="crayon-c">// Delete the memory</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-6"><span class="crayon-e">delete </span><span class="crayon-v">pnValue</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbdbb7300199030-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-8"><span class="crayon-c">// The following is not a good idea, but it probably</span></div><div class="crayon-line" id="crayon-555d734bbdbb7300199030-9"><span class="crayon-c">// won't crash</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-10"><span class="crayon-r">cout</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-v">pnValue</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbdbb7300199030-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-12"><span class="crayon-c">// Now, let's set the pointer to a protected address</span></div><div class="crayon-line" id="crayon-555d734bbdbb7300199030-13"><span class="crayon-v">pnValue</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-cn">0xFFFFFFFF</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-14">&nbsp;</div><div class="crayon-line" id="crayon-555d734bbdbb7300199030-15"><span class="crayon-c">// This will definitely crash</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbdbb7300199030-16"><span class="crayon-r">cout</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-v">pnValue</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p>
		</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 clearfix" id="comment-11147">
		<div id="div-comment-11147" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/610e617df852214cfe41e0914a4112a5?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/610e617df852214cfe41e0914a4112a5?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Tom</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-11147">
		April 7, 2008 at 7:26 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=11147#respond' onclick='return addComment.moveForm( "comment-11147", "11147", "respond", "151" )' aria-label='Reply to Tom'> &middot; Reply</a></span>		 
		</div>
		<p>Hello Alex -</p>
<p>In the code box after the paragraph that begins with the sentence &#8220;Now let&#8217;s do the overloaded assignment operator.&#8221;, I think line 1 of the code should be:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbda99632923884" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbda99632923884-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbda99632923884-1"><span class="crayon-cn">01.</span><span class="crayon-h"> </span><span class="crayon-c">// Assignment operator </span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>Not:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbdaa4354801206" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbdaa4354801206-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbdaa4354801206-1"><span class="crayon-cn">01.</span><span class="crayon-h"> </span><span class="crayon-c">// Copy constructor</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>Thanks.</p>
<p>[ Good eye.  Fixed!  Thanks.  -Alex ]</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 clearfix" id="comment-27073">
		<div id="div-comment-27073" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/dda3ec6d5168ba9ba89a845dcc1f8139?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/dda3ec6d5168ba9ba89a845dcc1f8139?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Mark</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-27073">
		September 11, 2008 at 1:24 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=27073#respond' onclick='return addComment.moveForm( "comment-27073", "27073", "respond", "151" )' aria-label='Reply to Mark'> &middot; Reply</a></span>		 
		</div>
		<p>Hello Alex:<br />
Really like this tutorial. Just tried your example here and found some<br />
speling errors: Mystring should be MyString with upper S.  Thanks.</p>
<p>[ Fixed.  Thanks.  -Alex ]</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 clearfix" id="comment-27664">
		<div id="div-comment-27664" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/26a804036b8ab921a5ba422364bd2055?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/26a804036b8ab921a5ba422364bd2055?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">davidv</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-27664">
		September 16, 2008 at 6:34 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=27664#respond' onclick='return addComment.moveForm( "comment-27664", "27664", "respond", "151" )' aria-label='Reply to davidv'> &middot; Reply</a></span>		 
		</div>
		<p>Here&#8217;s a silly question.<br />
If we add the prototypes for the copy constructor and overloaded operator= to the private section of the class in order to prevent copying, do we actually need to write them down later, given that we&#8217;re not really planning to use them?<br />
Thanks.</p>
		</div>
<ul class="children">
		<li class="comment byuser comment-author-alex bypostauthor even depth-2 clearfix" id="comment-28041">
		<div id="div-comment-28041" class="clearfix comment-container bypostauthor">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://www.tarindel.com' rel='external nofollow' class='url'>Alex</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-28041">
		September 21, 2008 at 9:18 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=28041#respond' onclick='return addComment.moveForm( "comment-28041", "28041", "respond", "151" )' aria-label='Reply to Alex'> &middot; Reply</a></span>		 
		</div>
		<p>By write them down, I presume you mean implement them.  The answer is no, as long as you don&#8217;t call them.  Don&#8217;t forget that private members can still be called by other members of the class, so you&#8217;ll have to ensure you don&#8217;t use them internally within the class.  If you try to do so, you&#8217;ll get a linker error.</p>
		</div>
<ul class="children">
		<li class="comment odd alt depth-3 clearfix" id="comment-35729">
		<div id="div-comment-35729" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/ef9443c1cffc0bc54f3cd080bad7427b?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ef9443c1cffc0bc54f3cd080bad7427b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">kudleep</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-35729">
		December 26, 2008 at 7:51 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=35729#respond' onclick='return addComment.moveForm( "comment-35729", "35729", "respond", "151" )' aria-label='Reply to kudleep'> &middot; Reply</a></span>		 
		</div>
		<p>Hi Alex,</p>
<p>can you give an example , how and in which case , one would need  to use copy constructor from other class such as derived one ! The statement  - &#8220;Sometimes we simply dont want our classes to be copied at all.&#8221; , can you please explain a bit, what i understood is we don&#8217;t want compiler to provide a default copy constructor for our program.</p>
		</div>
<ul class="children">
		<li class="comment byuser comment-author-alex bypostauthor even depth-4 clearfix" id="comment-35923">
		<div id="div-comment-35923" class="clearfix comment-container bypostauthor">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://www.tarindel.com' rel='external nofollow' class='url'>Alex</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-35923">
		December 29, 2008 at 8:54 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=35923#respond' onclick='return addComment.moveForm( "comment-35923", "35923", "respond", "151" )' aria-label='Reply to Alex'> &middot; Reply</a></span>		 
		</div>
		<p>I&#8217;m not sure what you mean by using copy constructors from other classes.  The copy constructor is used to instantiate an object of a particular class, so the copy constructor for that class should always be used.</p>
<p>As for not wanting your classes to be copied, sometimes there are legitimate reasons for this -- eg. doing an assignment would be too expensive, or you simply don&#8217;t have time to implement a deep copy and want to prevent people from accidentally using the shallow copy provided by the default copy constructor and default assignment operator the compiler provides for all classes.  By making these private, we tell the compiler not to create default versions, thus circumventing the issue.</p>
		</div>
<ul class="children">
		<li class="comment odd alt depth-5 clearfix" id="comment-95162">
		<div id="div-comment-95162" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/c8a0c0fc3aa2182c46210e0257253dac?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/c8a0c0fc3aa2182c46210e0257253dac?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">cooltoad</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-95162">
		February 7, 2011 at 6:14 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=95162#respond' onclick='return addComment.moveForm( "comment-95162", "95162", "respond", "151" )' aria-label='Reply to cooltoad'> &middot; Reply</a></span>		 
		</div>
		<p>I kinda understand why kudleep got confused. It is actually copying objects not classes.</p>
<p>Kuldeep: In a singleton class (only one stance is allowed), the copy constructor is private(hidden) so that a duplicate instance is not created.</p>
<p>eg.<br />
main.cpp<br />
-----<br />
Singleton obj1 = Singleton();<br />
Singleton duplicate_obj(obj1); // If you hide the copy constructor this will be caught at compilation.</p>
		</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 clearfix" id="comment-31651">
		<div id="div-comment-31651" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/23490d73ae5456568478541137e2a812?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/23490d73ae5456568478541137e2a812?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">som shekhar</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-31651">
		November 5, 2008 at 3:16 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=31651#respond' onclick='return addComment.moveForm( "comment-31651", "31651", "respond", "151" )' aria-label='Reply to som shekhar'> &middot; Reply</a></span>		 
		</div>
		<p>in the first example for deep copying , while using strncpy the m_nlength<br />
should be m_nlength+1..(line num 15)</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbd8d2020688534" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-2">2</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-4">4</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-6">6</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-8">8</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-10">10</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-12">12</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-14">14</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-16">16</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-18">18</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-20">20</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-22">22</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-24">24</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd8d2020688534-26">26</div><div class="crayon-num" data-line="crayon-555d734bbd8d2020688534-27">27</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbd8d2020688534-1"><span class="crayon-c">// Assignment operator</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-2"><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">::</span><span class="crayon-t">operator</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-3"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// check for self-assignment</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">&amp;cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-r">this</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// first we need to deallocate any value that this string is holding!</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-10">&nbsp;</div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// because m_nLength is not a pointer, we can shallow copy it</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_nLength</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// now we need to deep copy m_pchString</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// allocate memory for our copy</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Copy the parameter the newly allocated memory</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">strncpy</span><span class="crayon-sy">(</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd8d2020688534-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-r">this</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd8d2020688534-27"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0033 seconds] -->
<p></p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 clearfix" id="comment-35728">
		<div id="div-comment-35728" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/ef9443c1cffc0bc54f3cd080bad7427b?s=65&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ef9443c1cffc0bc54f3cd080bad7427b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">kuldeep</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-35728">
		December 26, 2008 at 7:39 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=35728#respond' onclick='return addComment.moveForm( "comment-35728", "35728", "respond", "151" )' aria-label='Reply to kuldeep'> &middot; Reply</a></span>		 
		</div>
		<p>Hi Alex,</p>
<p>This tutorial was really helpful, I&#8217;ve one doubt, is it necessary to have assignment operator ,if  copy constructor is already present, if we are sure that we are not using any assignment ( only instantiating  the new object from existing one, in this case only copy constructor is enough rt ? ), do we still need to overload assignment operator ?</p>
		</div>
<ul class="children">
		<li class="comment byuser comment-author-alex bypostauthor even depth-2 clearfix" id="comment-35922">
		<div id="div-comment-35922" class="clearfix comment-container bypostauthor">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://www.tarindel.com' rel='external nofollow' class='url'>Alex</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-35922">
		December 29, 2008 at 8:44 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=35922#respond' onclick='return addComment.moveForm( "comment-35922", "35922", "respond", "151" )' aria-label='Reply to Alex'> &middot; Reply</a></span>		 
		</div>
		<p>No, it&#8217;s not required to have an assignment operator (if you don&#8217;t create one, the compiler will create one for you and it will do a shallow copy).  However, this is generally a bad idea because when you look at your code in 3 months you&#8217;re likely to forget you didn&#8217;t overload the assignment operator and then when you try and use it, you won&#8217;t get the results you expect.</p>
		</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 clearfix" id="comment-56966">
		<div id="div-comment-56966" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/0183daeccdd0487da019c5177a5ec7e1?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/0183daeccdd0487da019c5177a5ec7e1?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Joris</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-56966">
		April 9, 2009 at 11:39 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=56966#respond' onclick='return addComment.moveForm( "comment-56966", "56966", "respond", "151" )' aria-label='Reply to Joris'> &middot; Reply</a></span>		 
		</div>
		<p>Can you explain how self-assignments can show up in realistic code? Could they be auto-generated somehow?</p>
<p>I feel maybe an assert should be appropriate if it is a real issue to get rid of them :-/</p>
		</div>
<ul class="children">
		<li class="comment byuser comment-author-alex bypostauthor even depth-2 clearfix" id="comment-59755">
		<div id="div-comment-59755" class="clearfix comment-container bypostauthor">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a4e62d28c29f6c864923207d4c17993b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://www.tarindel.com' rel='external nofollow' class='url'>Alex</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-59755">
		May 1, 2009 at 9:04 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=59755#respond' onclick='return addComment.moveForm( "comment-59755", "59755", "respond", "151" )' aria-label='Reply to Alex'> &middot; Reply</a></span>		 
		</div>
		<p>Self-assignments aren&#8217;t common (particularly in string classes) but it is possible to inadvertently get them in other cases (I can&#8217;t think of any good examples).</p>
<p>There&#8217;s really no reason for a self-assignment to fail.  The generally-intended end-result of the following statement:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbd673227088231" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbd673227088231-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbd673227088231-1"><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>is that &#8220;a&#8221; should equal whatever it did before this statement (unless you overloaded operator= to do something weird, like reference counting).</p>
<p>So we just special-case the self-assignment case and go on with life. <img src="http://www.learncpp.com/blog/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
		</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 clearfix" id="comment-66460">
		<div id="div-comment-66460" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/a07fa97be2555e0554284061e6bb659a?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a07fa97be2555e0554284061e6bb659a?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Mario</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-66460">
		August 17, 2009 at 4:32 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=66460#respond' onclick='return addComment.moveForm( "comment-66460", "66460", "respond", "151" )' aria-label='Reply to Mario'> &middot; Reply</a></span>		 
		</div>
		<p>Hi Alex,</p>
<p>I would like to dynamically allocate an array of my own class, which in turn has a member variable witch has to by dinamically allocated. In my concrete case I&#8217;ve got the following problem:<br />
A frame buffer (class FrameBuffer) of arbitrary size should store frames, also of arbitrary size. Once initialized, the size of the frames doesn&#8217;t change. Because I&#8217;d like to store some other informations in one frame buffer entry, I use for every entry of the frame buffer a class called FrameBufferItem.</p>
<p>My problem is now : How could I dynamically allocate memory for an array of my own class, which needs parameters in the standard- and copy-constructor?</p>
<p>Here is my code:</p>
<p>[code]<br />
#ifndef FRAMEBUFFER_H<br />
#define FRAMEBUFFER_H</p>
<p>#include </p>
<p>class FrameBufferItem;</p>
<p>class FrameBuffer<br />
{<br />
public:<br />
  FrameBuffer(unsigned int p_uiFrameSize, IppiRect p_imageRect);<br />
  ~FrameBuffer();</p>
<p>private:<br />
  FrameBufferItem *m_cFrameBufferItems;<br />
  unsigned int m_uiFrameSize;<br />
  IppiRect m_imageRect;<br />
  unsigned int m_uiActualFrame;<br />
};</p>
<p>#endif  // FRAMEBUFFER_H</p>
<p>[code]<br />
#include &#8220;framebuffer.h&#8221;<br />
#include &#8220;framebufferitem.h&#8221;</p>
<p>FrameBuffer::FrameBuffer(unsigned int p_uiFrameSize, IppiRect p_imageRect)<br />
  : m_uiFrameSize(p_uiFrameSize), m_imageRect(p_imageRect)<br />
{<br />
  // Here I&#8217;ve got a Problem:<br />
  // When compiling with VS2005 I got the Error C2075<br />
  m_cFrameBufferItems = new FrameBufferItem[p_uiFrameSize](m_imageRect);</p>
<p>  // When using the following line, then I got the Error C2512<br />
  // m_cFrameBufferItems = new FrameBufferItem[p_uiFrameSize];<br />
}</p>
<p>FrameBuffer::~FrameBuffer()<br />
{<br />
  delete[] m_cFrameBufferItems;<br />
  m_cFrameBufferItems = 0;<br />
}</p>
<p>[code]<br />
#ifndef FRAMEBUFFERITEM_H<br />
#define FRAMEBUFFERITEM_H</p>
<p>#include<br />
#include 	// for std::memcpy</p>
<p>class FrameBufferItem<br />
{<br />
public:<br />
  /*  when I use the next line, then the error C2512 for the second solution doesn&#8217;t occure<br />
      but I need a Parameter to allocate the right ammount of memory */<br />
  //FrameBufferItem(){};</p>
<p>  FrameBufferItem(IppiRect imageRect);<br />
  ~FrameBufferItem();<br />
  FrameBufferItem(const FrameBufferItem &amp;cSource);              // Copy constructor<br />
  FrameBufferItem&amp; operator= (const FrameBufferItem &amp; cSource);	// assignement-Operator</p>
<p>  IppiRect m_imageRect;         // Framesize and position<br />
  Ipp8u *m_imageData;           // Dynamically alocated Imagedata</p>
<p>private:<br />
  void copyItem(const FrameBufferItem &amp;cSource);</p>
<p>};</p>
<p>#endif  // FRAMEBUFFERITEM_H</p>
<p>[code]<br />
#include &#8220;framebufferitem.h&#8221;</p>
<p>FrameBufferItem::FrameBufferItem(IppiRect imageRect)<br />
  : m_imageRect(imageRect)<br />
{<br />
  m_imageData = new Ipp8u[m_imageRect.width*m_imageRect.height];<br />
}</p>
<p>FrameBufferItem::~FrameBufferItem()<br />
{<br />
  delete[] m_imageData;<br />
  m_brightImageData = 0;<br />
}</p>
<p>FrameBufferItem::FrameBufferItem(const FrameBufferItem &amp;cSource)<br />
{<br />
  copyItem(cSource);<br />
}</p>
<p>FrameBufferItem&amp; FrameBufferItem::operator= (const FrameBufferItem &amp;cSource)<br />
{<br />
  // check for self-assignement<br />
  if (this == &amp;cSource)<br />
    return *this;</p>
<p>  // first we need to deallocate any value that this FrameBufferItm is holding!<br />
  delete[] m_imageData;</p>
<p>  // do the copy<br />
  copyItem(cSource);</p>
<p>  // return the existing object<br />
  return *this;<br />
}</p>
<p>void FrameBufferItem::copyItem(const FrameBufferItem &amp;cSource)<br />
{<br />
  m_imageRect = cSource.m_imageRect;</p>
<p>  if( cSource.m_brightImageData )<br />
  {<br />
    // Allocate memory<br />
    m_imageData = new Ipp8u[m_imageRect.width*m_imageRect.height];</p>
<p>    // copy<br />
    memcpy( m_imageData, cSource.m_imageData, m_imageRect.width*m_imageRect.height );</p>
<p>  } else {<br />
    m_imageData = 0;<br />
  }<br />
}</p>
<p>Thanks.</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 clearfix" id="comment-79872">
		<div id="div-comment-79872" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/490e8f34d16490201004f40191614c31?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/490e8f34d16490201004f40191614c31?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Hunter</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-79872">
		March 6, 2010 at 5:29 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=79872#respond' onclick='return addComment.moveForm( "comment-79872", "79872", "respond", "151" )' aria-label='Reply to Hunter'> &middot; Reply</a></span>		 
		</div>
		<p>after the line</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbd424344524423" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbd424344524423-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbd424344524423-1"><span class="crayon-v">delete</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">m_pchString</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>where will be m_pchString pointing to? and what will be the length of the memory its pointing to?</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 clearfix" id="comment-80369">
		<div id="div-comment-80369" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/c372f71b8c269343560ebac4ffc757b2?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/c372f71b8c269343560ebac4ffc757b2?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Phil Braun</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-80369">
		March 12, 2010 at 8:52 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=80369#respond' onclick='return addComment.moveForm( "comment-80369", "80369", "respond", "151" )' aria-label='Reply to Phil Braun'> &middot; Reply</a></span>		 
		</div>
		<p>In the following example pulled from the article, there seems to be two problems that can occur.</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbd350503557981" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbd350503557981-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-2">2</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-4">4</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-6">6</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-8">8</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-10">10</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-12">12</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-14">14</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-16">16</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-18">18</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-20">20</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-22">22</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-24">24</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd350503557981-26">26</div><div class="crayon-num" data-line="crayon-555d734bbd350503557981-27">27</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbd350503557981-1"><span class="crayon-c">// Assignment operator</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-2"><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">::</span><span class="crayon-t">operator</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">MyString</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-3"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// check for self-assignment</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">&amp;cSource</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-r">this</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// first we need to deallocate any value that this string is holding!</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">m_pchString</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-10">&nbsp;</div><div class="crayon-line" id="crayon-555d734bbd350503557981-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// because m_nLength is not a pointer, we can shallow copy it</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_nLength</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// now we need to deep copy m_pchString</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// allocate memory for our copy</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-v">m_nLength</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Copy the parameter the newly allocated memory</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">strncpy</span><span class="crayon-sy">(</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_pchString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">m_nLength</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd350503557981-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-r">this</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd350503557981-27"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0032 seconds] -->
<p></p>
<p>The first problem is the line &#8220;delete[] m_pchString;&#8221;. If &#8220;m_pchString&#8221; is not allocated, could this cause an exception? Would it not be better to check if &#8220;m_pchString&#8221; is valid before attempting to delete the memory?</p>
<p>The second problem occurs if &#8220;cSource.m_pchString&#8221; is a zero length string. Would it not be better to assign NULL to m_pchString if &#8220;cSource.m_pchString&#8221; has zero length? Oh, and what happens when an attempt is made to create a zero length string in the &#8220;new&#8221; statement and when &#8220;strncpy&#8221; attempts to copy a zero length string?</p>
<p>Otherwise this code is a good learning tool.</p>
<p>Phil</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 clearfix" id="comment-82524">
		<div id="div-comment-82524" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/9ce0d3b45535529a26fe86a68e4af714?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9ce0d3b45535529a26fe86a68e4af714?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">intelliplay2000</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-82524">
		April 8, 2010 at 5:46 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=82524#respond' onclick='return addComment.moveForm( "comment-82524", "82524", "respond", "151" )' aria-label='Reply to intelliplay2000'> &middot; Reply</a></span>		 
		</div>
		<p>Phil,<br />
Let me see if I can answer your concerns:</p>
<p>For concern #1, remember that the code is for an assignment operator so the object must exist (i.e. m_pchString must have been allocated). Otherwise the copy constructor would rather be called. Also note that, if for some reason m_pchString, has been deleted after having been allocated and is now NULL, it is still okay to call delete on NULL (its a noop).</p>
<p>Now for concern #2, I am assumming you&#8217;re referring to when the object is default constructed (i.e. cSource.m_pchString = &#8220;&#8221;). This is different from when cSource.m_pchString = NULL. If you have the empty string, I think you want to go ahead and create memory and copy the terminator as the author did. And remember the length of the empty string is not zero but 1 (for the terminator, &#8221;). If the length is zero, then cSource.m_pchString = NULL and you will fall into the else case as the author did, and that would exactly be the same as what you&#8217;re suggesting.<br />
Cheers</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 clearfix" id="comment-83013">
		<div id="div-comment-83013" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">prc</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-83013">
		April 16, 2010 at 2:35 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=83013#respond' onclick='return addComment.moveForm( "comment-83013", "83013", "respond", "151" )' aria-label='Reply to prc'> &middot; Reply</a></span>		 
		</div>
		<p>My question is, assuming we didn&#8217;t use c style strings, and instead just used std::string (or for that matter, assumed we just use any objected in the heap that wasn&#8217;t an array), would the proper way to deep copy it be this:</p>
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-555d734bbd20f702180316" class="crayon-syntax crayon-theme-familiar-learncppcom crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-555d734bbd20f702180316-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd20f702180316-2">2</div><div class="crayon-num" data-line="crayon-555d734bbd20f702180316-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-555d734bbd20f702180316-4">4</div><div class="crayon-num" data-line="crayon-555d734bbd20f702180316-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-555d734bbd20f702180316-1"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_stdString</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd20f702180316-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-555d734bbd20f702180316-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// allocate the memory, an copy the data</span></div><div class="crayon-line crayon-striped-line" id="crayon-555d734bbd20f702180316-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">m_pchString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">std</span><span class="crayon-o">::</span><span class="crayon-t">string</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">(</span><span class="crayon-v">cSource</span><span class="crayon-sy">.</span><span class="crayon-v">m_stdString</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-555d734bbd20f702180316-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p></p>
<p>or is there a better way that we should go about this?</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 clearfix" id="comment-83582">
		<div id="div-comment-83582" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/45330fc03762c9899cdc7d52c5aaebd2?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/45330fc03762c9899cdc7d52c5aaebd2?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://nothing' rel='external nofollow' class='url'>abhishek</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-83582">
		April 25, 2010 at 10:46 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=83582#respond' onclick='return addComment.moveForm( "comment-83582", "83582", "respond", "151" )' aria-label='Reply to abhishek'> &middot; Reply</a></span>		 
		</div>
		<p>really very good one and nicely descriptive Thanks</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 clearfix" id="comment-86968">
		<div id="div-comment-86968" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/97fe2f3a75c270cf59bef281924d347b?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/97fe2f3a75c270cf59bef281924d347b?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://www.extra-mobile-games.com/' rel='external nofollow' class='url'>kayallext</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-86968">
		June 22, 2010 at 12:05 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=86968#respond' onclick='return addComment.moveForm( "comment-86968", "86968", "respond", "151" )' aria-label='Reply to kayallext'> &middot; Reply</a></span>		 
		</div>
		<p>[url=http://www.extra-mobile-games.com/]free mobile games[/url]</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 clearfix" id="comment-92285">
		<div id="div-comment-92285" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/45330fc03762c9899cdc7d52c5aaebd2?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/45330fc03762c9899cdc7d52c5aaebd2?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname"><a href='http://n/a' rel='external nofollow' class='url'>abhi</a></span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-92285">
		September 18, 2010 at 11:59 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=92285#respond' onclick='return addComment.moveForm( "comment-92285", "92285", "respond", "151" )' aria-label='Reply to abhi'> &middot; Reply</a></span>		 
		</div>
		<p>Hi,<br />
I have went throguh this articale it is very nice but i had silly question..</p>
<p>we are same code into constructor and assigmnet operatoer so i had question why we need constrcutor<br />
and assignment operator during deep copy . can we have only one i.e. copy constructor or assigmnet operator</p>
		</div>
<ul class="children">
		<li class="comment odd alt depth-2 clearfix" id="comment-95163">
		<div id="div-comment-95163" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/c8a0c0fc3aa2182c46210e0257253dac?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/c8a0c0fc3aa2182c46210e0257253dac?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">cooltoad</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-95163">
		February 7, 2011 at 6:20 pm</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=95163#respond' onclick='return addComment.moveForm( "comment-95163", "95163", "respond", "151" )' aria-label='Reply to cooltoad'> &middot; Reply</a></span>		 
		</div>
		<p>It depends on usage or how it is invoked in main. Check this tutorial.</p>
<p>http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/</p>
		</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1 clearfix" id="comment-95323">
		<div id="div-comment-95323" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/c13ad922de78814a49af2e688bf87628?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/c13ad922de78814a49af2e688bf87628?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">dhananjay</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-95323">
		April 13, 2011 at 2:03 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=95323#respond' onclick='return addComment.moveForm( "comment-95323", "95323", "respond", "151" )' aria-label='Reply to dhananjay'> &middot; Reply</a></span>		 
		</div>
		<p>It was nice to read this article and excellent feedback. I have also few questions in my mind to ask:-</p>
<p>1. Why is the program crashing if we change the constructor from MyString(char *pchString=&#8221;&#8221;) to MyString(char *pchString=0) ? </p>
<p>2. Instead of strncpy, isn&#8217;t it better to use strcpy? It&#8217;d have saved saved few lines e.g m_nlength+1, adding &#8216;\o&#8217; at the end of string. </p>
<p>I&#8217;ll appreciate your help.</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 clearfix" id="comment-97801">
		<div id="div-comment-97801" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/42a3a7cc9357859a8446936bf66241fc?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/42a3a7cc9357859a8446936bf66241fc?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">vvrao559</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-97801">
		September 12, 2012 at 7:25 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=97801#respond' onclick='return addComment.moveForm( "comment-97801", "97801", "respond", "151" )' aria-label='Reply to vvrao559'> &middot; Reply</a></span>		 
		</div>
		<p>Why the following Code is not giving expected result as:<br />
Default Constructor<br />
printing c1--&gt;9999<br />
printing c1--&gt;0<br />
printing c2--&gt;0</p>
<p>Code:</p>
<p>#include<br />
using namespace std;</p>
<p>class ShallowCopy{<br />
        public:<br />
                char *c;<br />
                ShallowCopy(){<br />
                        c = new char;<br />
                        cout&lt;&lt;&quot;Default Constructor&quot;&lt;&lt;endl;<br />
                }</p>
<p>/*                 ShallowCopy( const ShallowCopy &amp;obj){<br />
                        c = new int;<br />
                        *c = *obj.c;<br />
                        *obj.c = 20;</p>
<p>                        cout&lt;&#8220;&lt;&lt;*obj.c&lt;&lt;endl;<br />
                        cout&lt;&#8220;&lt;&lt;*c&lt;&lt;endl;<br />
                }</p>
<p>*/<br />
                ~ShallowCopy(){<br />
                        cout&lt;&lt;&quot;freed c&quot;&lt;&lt;endl;<br />
                        delete c;<br />
                }<br />
};<br />
int main(){<br />
        ShallowCopy c1;<br />
        c1.c = &quot;9999&quot;;<br />
        cout&lt;&#8220;&lt;&lt;c1.c&lt;&lt;endl;<br />
        ShallowCopy c2 = c1;<br />
        c2.c = &quot;0&quot;;<br />
        cout&lt;&#8220;&lt;&lt;c1.c&lt;&lt;endl;<br />
        cout&lt;&#8220;&lt;&lt;c2.c&lt;&lt;endl;<br />
        return 1 ;<br />
}</p>
<p>Same code is working for int</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1 clearfix" id="comment-97802">
		<div id="div-comment-97802" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/42a3a7cc9357859a8446936bf66241fc?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/42a3a7cc9357859a8446936bf66241fc?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">Vishnuvardhan Rao</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-97802">
		September 12, 2012 at 11:11 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=97802#respond' onclick='return addComment.moveForm( "comment-97802", "97802", "respond", "151" )' aria-label='Reply to Vishnuvardhan Rao'> &middot; Reply</a></span>		 
		</div>
		<p>To do a shallow copy with respect to character pointer, we need to do following way:<br />
strcpy(dst,src);</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 clearfix" id="comment-129788">
		<div id="div-comment-129788" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/7029191ef43842c7641bfc010ae32763?s=65&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7029191ef43842c7641bfc010ae32763?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">enoquick</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-129788">
		March 11, 2014 at 5:35 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=129788#respond' onclick='return addComment.moveForm( "comment-129788", "129788", "respond", "151" )' aria-label='Reply to enoquick'> &middot; Reply</a></span>		 
		</div>
		<p>An interesting technical for operator=() is :</p>
<p>T&amp; T::operator=(const T&amp; x) {<br />
   T t(x);  // copy constructor<br />
   swap(t);  // exception safe<br />
   return *this;<br />
}</p>
<p>void T::swap(T&amp;)throw();   // exchange the single components -- no throw exception</p>
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1 clearfix" id="comment-252061">
		<div id="div-comment-252061" class="clearfix comment-container">
		<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/3f47c7b6bf6385a08b2aeed088efa3e0?s=65&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/3f47c7b6bf6385a08b2aeed088efa3e0?s=130&amp;d=mm&amp;r=g 2x' class='avatar avatar-65 photo' height='65' width='65' />		<span class="authorname">KM</span>
		</div>
				<div class="comment-meta commentmetadata">
		<a href="http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/#comment-252061">
		April 4, 2015 at 7:09 am</a>
        <span class="comment-reply-link"><a class='comment-reply-link' href='/cpp-tutorial/912-shallow-vs-deep-copying/?replytocom=252061#respond' onclick='return addComment.moveForm( "comment-252061", "252061", "respond", "151" )' aria-label='Reply to KM'> &middot; Reply</a></span>		 
		</div>
		<p>Very nice explanation. Made many things clear. Thank you!</p>
		</div>
</li><!-- #comment-## -->
	
	</ul>
	<!-- / Comment List -->

	



						<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="/cpp-tutorial/912-shallow-vs-deep-copying/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://www.learncpp.com/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																										<p><input class="text author" id="author" name="author" type="text" value="" size="30" tabindex="1" />&nbsp;&nbsp;<label for="author"><strong>Name </strong> (required)</label></p>
<p><input class="text email" id="email" name="email" type="text" value="" size="30"  tabindex="2" />&nbsp;&nbsp;<label for="email"><strong>Email</strong> (will not be published) (required)</label></p>
<p><input class="text url" id="url" name="url" type="text" value="" size="30"  tabindex="3" />&nbsp;&nbsp;<label for="url">Website</label></p>
<p class="aiowps-captcha"><label>Please enter an answer in digits:</label><div class="aiowps-captcha-equation"><strong>six &#43; fourteen = <input type="hidden" name="aiowps-captcha-string-info" id="aiowps-captcha-string-info" value="MTQzMjE4NzcyNHR5bTdtZjVxZ3o3ZGJwYWozMW04MjA=" /><input type="hidden" name="aiowps-captcha-temp-string" id="aiowps-captcha-temp-string" value="1432187724" /><input type="text" size="2" length="2" id="aiowps-captcha-answer" name="aiowps-captcha-answer" value="" /></strong></div></p>												<p><textarea name="comment" id="comment" rows="10" cols="10" tabindex="4"></textarea></p>						<div class="useCode">Put C++ code inside [code][/code] tags to use the syntax highlighter</div>
						<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='151' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="0cd76f35c8" /></p>		<p class="antispam-group antispam-group-q" style="clear: both;">
			<label>Current ye@r <span class="required">*</span></label>
			<input type="hidden" name="antspm-a" class="antispam-control antispam-control-a" value="2015" />
			<input type="text" name="antspm-q" class="antispam-control antispam-control-q" value="3.5" />
		</p>
		<p class="antispam-group antispam-group-e" style="display: none;">
			<label>Leave this field empty</label>
			<input type="text" name="antspm-e-email-url-website" class="antispam-control antispam-control-e" value="" />
		</p>
<p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="133"/></p>					</form>
							</div><!-- #respond -->
			<div class='code-block code-block-7' style='margin:8px 0px;'><div class="cf_monitor">
<div id="Content Below Comment">
    <script type="text/javascript">
    var width = 0;
    if (document.getElementById('middle'))
        width = document.getElementById('middle').clientWidth;
    else
        width = document.innerWidth;

    if (width >= 768)
    {
        try {
            window._mNHandle.queue.push(function () {
		        window._mNDetails.loadTag("Content Below Comment", "728x90", "287758258");
		        });
		    }
        catch (error) {}
    }
	</script>
</div>
</div></div>		
    

</td>
<!-- / Main Column -->

<!-- Right Inner Sidebar -->

<!-- Right Sidebar -->
<td id="right">

	<div id="text-7" class="widget widget_text">			<div class="textwidget"><div class="cf_monitor">
<!-- Post - Right Sidebar - Wide Sky -->
<script type="text/javascript">
    google_ad_client = "ca-pub-0588844875925051";
    google_ad_slot = "0955932809";
    google_ad_width = 160;
    google_ad_height = 600;
</script>
<!-- Post - Right Sidebar - Wide Sky -->
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
		</div>
</td>
<!-- / Right Sidebar -->

</tr>
<!-- / Main Body -->


</table><!-- / layout -->
</div><!-- / container -->
</div><!-- / wrapper -->
		<!-- Full Width Footer -->
		<div id="footer" class="full-width">
    LearnCpp.com -- Teaching you how to program in C++ since May 25, 2007.&nbsp;&nbsp;Copyright &copy; 2015 <a href="http://www.learncpp.com/">Learn C++</a> - All Rights Reserved<br />Powered by <a href="http://wordpress.org/">WordPress</a> &amp; <a href="http://forum.bytesforall.com/">Atahualpa</a>    
    
    
	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"http:\/\/www.learncpp.com\/cpp-tutorial\/912-shallow-vs-deep-copying\/":151};
		window.WPCOM_jetpack = true;
				window.WPCOM_site_ID = 3928254;
			</script>
	<div id="sharing_email" style="display: none;">
		<form action="/cpp-tutorial/912-shallow-vs-deep-copying/" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="" />

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="" />

						<input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off" />
			<script> document.getElementById('jetpack-source_f_name').value = ''; </script>
			
			<img style="float: right; display: none" class="loading" src="http://www.learncpp.com/blog/wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a rel="nofollow" href="#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
		<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-google-plus-1' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
		});
		</script>
							<script type="text/javascript">
			jQuery(document).on('ready', function(){
				jQuery('body').on('click', 'a.share-pinterest', function(e){
					e.preventDefault();

					// Load Pinterest Bookmarklet code
					var s = document.createElement("script");
					s.type = "text/javascript";
					s.src = window.location.protocol + "//assets.pinterest.com/js/pinmarklet.js?r=" + ( Math.random() * 99999999 );
					var x = document.getElementsByTagName("script")[0];
					x.parentNode.insertBefore(s, x);

					// Trigger Stats
					var s = document.createElement("script");
					s.type = "text/javascript";
					s.src = this + ( this.toString().indexOf( '?' ) ? '&' : '?' ) + 'js_only=1';
					var x = document.getElementsByTagName("script")[0];
					x.parentNode.insertBefore(s, x);
				});
			});
			</script>
		<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/plugins/akismet/_inc/form.js?ver=3.1.1'></script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-includes/js/comment-reply.min.js?ver=4.2.2'></script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/plugins/anti-spam/js/anti-spam-3.5.js'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201521'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.learncpp.com/blog/wp-content/plugins/jetpack/modules/sharedaddy/sharing.js?ver=3.5.3'></script>
<script type='text/javascript' src='http://stats.wp.com/e-201521.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:3.5.3',blog:'3928254',post:'151',tz:'-8',srv:'www.learncpp.com'} ]);
	_stq.push([ 'clickTrackerInit', '3928254', '151' ]);
</script>
		</div>
		<!-- / Full Width Footer -->

</body>
</html>
<!-- Dynamic page generated in 1.278 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2015-05-20 21:55:24 -->

<!-- Compression = gzip -->
<!-- super cache -->


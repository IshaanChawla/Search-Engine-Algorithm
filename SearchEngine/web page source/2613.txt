<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <title>Testing with EasyMock - Tutorial</title>
      <script type='text/javascript'>window.mod_pagespeed_start = Number(new Date());</script><link rel="stylesheet" type="text/css" href="http://www.vogella.com/css/A.articles.css.pagespeed.cf.R8TsdYc8Ks.css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.77.1">
      <meta name="description" content="Testing with EasyMock This tutorial explains testing with the EasyMock framework within Eclipse. It is based on the EasyMock 3.1 release.">
      <link rel="shortcut icon" href="http://www.vogella.com/favicon.ico">
      <meta name="viewport" content="width=device-width, initial-scale=1">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      
      
      <!-- Google analytics (Jennifer) -->
      
      <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-3967758-1']);_gaq.push(['_setDomainName','vogella.com']);_gaq.push(['_setAllowLinker',true]);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();</script>
      
      
      
      <!-- Load jQuery -->
      <script type="text/javascript" src="http://www.vogella.com/javascript/jquery/jquery.js.pagespeed.jm.LynoS8h5RR.js"></script>
      
      <!-- jQuery Hide Buttons -->
      <script type="text/javascript">//<![CDATA[
var fixed=false;$(document).scroll(function(){if($(this).scrollTop()>955){if(!fixed){fixed=true;$('.bottom_left').css({display:'block'});$('.bottom_right').css({display:'block'});}}else{if(fixed){fixed=false;$('.bottom_left').css({display:'none'});$('.bottom_right').css({display:'none'});}}});
//]]></script>
      
      
      <!-- Lake Quincy Ads - old way now replaced with Lake Quincy Ads Responsive
<script type='text/javascript'>
	function _dmBootstrap(file) {
		var _dma = document.createElement('script');
		_dma.type = 'text/javascript';
		_dma.async = true;
		_dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file;
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
	}
	function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js');}
	(function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js'); setTimeout(_dmFollowup, 2000);})();
</script>-->
      
      
      <!-- Lake Quincy Ads Responsive -->  
      <script type="text/javascript">var googletag=googletag||{};googletag.cmd=googletag.cmd||[];(function(){var gads=document.createElement('script');gads.async=true;gads.type='text/javascript';var useSSL='https:'==document.location.protocol;gads.src=(useSSL?'https:':'http:')+'//www.googletagservices.com/tag/js/gpt.js';var node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(gads,node);})();</script>
      
      <script type="text/javascript">googletag.cmd.push(function(){var mapping=googletag.sizeMapping().addSize([320,700],[300,250]).addSize([750,200],[300,250]).addSize([1170,200],[728,90]).build();googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/right',[160,600],'ad-left').addService(googletag.pubads()).setTargeting('left');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/beforeTOC',[[300,250],[728,90]],'ad-beforeTOC').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('beforeTOC');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/inBetween01',[[300,250],[728,90]],'ad-inBetween01').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('inBetween01');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/inBetween02',[[300,250],[728,90]],'ad-inBetween02').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('inBetween02');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/inBetween03',[[300,250],[728,90]],'ad-inBetween03').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('inBetween03');googletag.pubads().enableSingleRequest();googletag.enableServices();});</script>
      
      <div id="headerpart">
         
         	
         <div id="logo">
            		<a title="vogella.com" href="http://www.vogella.com">
               			<img src="http://www.vogella.com/img/logo/xindex_logo.png.pagespeed.ic.W70tcDQqll.png" alt="vogella.com"> 
               		</a>
            	
         </div> 
         <!-- logo -->
         	
         	
         <div id="topnav">
            		
            <ul id="home" class="topnav">
               			
               <li id="home-icon"><a href="http://www.vogella.com/"></a></li>
               			
               <li class="currentpage"> <a href="http://www.vogella.com/tutorials/">Tutorials</a>
                  				
                  <ul>
                     					
                     <li><a href="http://www.vogella.com/tutorials/android.html">Android Programming</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/eclipseide.html">Eclipse IDE</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/eclipse.html">Eclipse RCP/Plug-ins</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/versioncontrol.html">Version Control</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/web.html">Web</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/java.html">Java</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/technology.html">Technology</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/google.html">Google</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/algorithms.html">Algorithms</a></li>
                     					
                     <li><a href="http://www.vogella.com/tutorials/designpattern.html">Design Pattern</a></li>
                     				
                  </ul>
                  			
               </li>
               			
               			
               <li><a href="http://www.vogella.com/training/">Services</a>
                  				
                  <ul>
                     					
                     <li><a href="http://www.vogella.com/training/android/index.html">Android Development Training</a>
                        						
                        <ul>
                           							
                           <li><a href="http://www.vogella.com/training/android/androidprofessional.html">Android Professional</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/android/androidtesting.html">Android Testing and Appl. Optimization</a></li>
                           						
                        </ul>
                        					
                     </li>
                     					
                     <li><a href="http://www.vogella.com/training/eclipse/index.html">Eclipse Development Training</a>
                        						
                        <ul>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/eclipsercp.html">Eclipse RCP</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/eclipseide.html">Eclipse IDE Expert</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/eclipsercpmigration.html">Eclipse RCP Migration</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/eclipsecontribution.html">	Contributing to Eclipse</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/eclipseplugin.html">Eclipse IDE Plug-in Development</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/tycho.html">Maven/Tycho</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/rcpjavaeespring.html">Eclipse RCP with Java EE and Spring</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/eclipseoxygen.html">oXygen in Eclipse</a></li>
                           							
                           <li><a href="http://www.vogella.com/training/eclipse/eclipsenattable.html">NatTable</a></li>
                           						
                        </ul>
                        					
                     </li>
                     					
                     <li><a href="http://www.vogella.com/training/git.html">Git Training</a></li>
                     					
                     <li><a href="http://www.vogella.com/training/groovy.html">Groovy Training</a></li>
                     					
                     <li><a href="http://www.vogella.com/training/gradle.html">Gradle Training</a></li>
                     					
                     <li><a href="http://www.vogella.com/training/java.html">Java Training</a></li>
                     					
                     <li><a href="http://www.vogella.com/training/spring.html">Spring Workshop</a></li>
                     					
                     <li><a href="http://www.vogella.com/consulting/">Expert Consulting</a></li>
                     				
                  </ul>
                  			
               </li>
               			
               <li><a href="http://www.vogella.com/products/">Products</a>
                  				
                  <ul>
                     					
                     <li><a href="http://saneclipse.vogella.com">saneclipse</a></li>
                     					
                     <li><a href="http://codemodify.vogella.com">CodeModify</a></li>
                     					
                     <li><a href="http://preferencespy.vogella.com">PreferenceSpy</a></li>
                     					
                     <!--<li><a href="http://e4tools.vogella.com">e4 tools</a></li>
					<li><a href="http://e4perspectiveswitcher.vogella.com">e4 perspectiveSwitcher</a></li>-->
                     				
                  </ul>
                  			
               </li>
               			
               <li><a href="http://www.vogella.com/books/">Books</a>
                  				
                  <ul>
                     					
                     <li><a href="http://www.vogella.com/books/eclipsecontribution.html">Contributing to the Eclipse Project</a></li>
                     					
                     <li><a href="http://www.vogella.com/books/eclipsercp.html">Eclipse RCP</a></li>
                     					
                     <li><a href="http://www.vogella.com/books/eclipseide.html">Eclipse IDE</a></li>
                     					
                     <li><a href="http://www.vogella.com/books/git.html">Git</a></li>
                     					
                     <li><a href="http://www.vogella.com/books/android.html">Android SQlite and ContentProvider</a></li>
                     				
                  </ul>
                  			
               </li>
               			
               <li><a href="http://www.vogella.com/company/">Company</a>
                  				
                  <ul>
                     					
                     <li><a href="http://www.vogella.com/aboutvogella.html">About us</a></li>
                     					
                     <li><a href="http://www.vogella.com/people/index.html">People at vogella</a></li>
                     					
                     <li><a href="http://www.vogella.com/customers.html" onclick="_gaq.push(['_trackEvent', 'Customers', 'clicked', 'Header']);">Reference Customers</a></li>
                     					
                     <li><a href="http://blog.vogella.com/">Blog</a></li>
                     					
                     <li><a href="http://www.vogella.com/jobs/">Jobs</a></li>
                     					
                     <li><a href="http://www.vogella.com/faq.html">FAQ</a></li>
                     					
                     <li><a href="http://www.vogella.com/legal.html">Legal</a></li>
                     				
                  </ul>
                  			
               </li>
               			
               <li><a href="http://www.vogella.com/support.html">Donate</a></li>
               			
               <li><a href="http://www.vogella.com/contact.html">Contact us</a></li>
               		
            </ul>
            	
         </div>
         <!-- topnav -->
         	
         
         	
         <div id="searchfixed">
            		
            <form action="http://www.vogella.com/search.html" id="cse-search-box">
               			
               <div id="searchwrapper">
                  
                  				<input type="hidden" name="cx" value="partner-pub-3851443674951530:3991491935">
                  				<input type="hidden" name="cof" value="FORID:10">
                  				<input type="hidden" name="ie" value="UTF-8">
                  				<input type="text" placeholder="Search" id="search_field" name="q" size="55">
                  				<input type="image" src="http://www.vogella.com/img/icons/xsrch.png.pagespeed.ic.BP8TtuQRzJ.png" id="search_button" name="sa" alt="Search">
                  			
               </div>
               		
            </form>
            	
         </div> 
         <!-- searchfixed -->
         
         
      </div> 
      <!-- headerpart -->
      
      
      <div id="leftcol">
         
         	<br>
         	<br>
         	
         	<a href="http://www.vogella.com/support.html">
            		<img src="http://www.vogella.com/img/common/140x150xvogella-donate.png.pagespeed.ic.gMuY8kQC6X.png" width="140" height="150" alt="Support free tutorials" title="Support free tutorials" onclick="_gaq.push(['_trackEvent', 'Donations', 'clicked', 'Top tutorial']);"></a>
         
         	<br>
         	<br>
         
         	<script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
         	
         <!-- LeftColumn -->
         	<ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-3851443674951530" data-ad-slot="6294971031"></ins>
         	<script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
         
         	<p></p>
         	
         	<br>
         	<br>
         
         	
         <!-- Nonresponsive Lake Quincy 160x600 Wide Skycraper code
	<div data-type="ad" data-publisher="lqm.javaeclipseandroid.site" data-zone="right" data-format="160x600"></div>-->
         	
         	
         <!-- Responsive Lake Quincy Ads -->
         	
         <div id="ad-left">
            		<script type="text/javascript">googletag.cmd.push(function(){googletag.display('ad-left');});</script>
            	</div>
         
      </div> 
      <!-- leftcolumn -->
      
      
      <div id="rightcol">
         
         	
         <!-- vogellas own advertising for training and books --> 	
         	
         <p class="training-bg">
            		<a class="image-z" href="http://www.vogella.com/training/" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'whole Box']);">
               			<img src="http://www.vogella.com/img/training/200x364xvogellatraining_ad.png.pagespeed.ic.KQGlbyMRAP.png" height="364" width="200" alt="vogella training">
               		</a>
            		<a class="btn-training button1" href="http://www.vogella.com/training/" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'training']);">Training</a>
            		<a class="btn-training button2" href="http://www.vogella.com/books/index.html" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'books']);">Books</a>
            	
         </p> 
         	
         	
         <div class="bottom_right">
            		
            <div class="social_media">
               			<a href="http://www.twitter.com/vogellacompany">
                  				
                  <h1>FOLLOW<br>ME ON
                  </h1> 
                  				<img src="http://www.vogella.com/img/tutoriallinks/xtwitter.png.pagespeed.ic.5z4YhYIkb2.png" alt="Follow me on twitter">
                  			</a>
               		
            </div>
            <!-- social_media -->
            
            		
            <div class="social_media">
               			<a rel="me" href="https://profiles.google.com/104044918586174763681">
                  				
                  <h1>FOLLOW<br>ME ON
                  </h1> 
                  				<img src="http://www.vogella.com/img/tutoriallinks/xgoogle_plus.png.pagespeed.ic.d6W0KZShGF.png" alt="Follow me on Google+">
                  			</a>
               		
            </div>
            <!-- social_media -->
            	
         </div> 
         <!-- bottom_right -->
         	
         	
         <div class="bottom_left">
            	
            <div class="services">
               		<a href="http://www.vogella.com/training/index.html">
                  	<img src="http://www.vogella.com/img/tutoriallinks/xtraining.png.pagespeed.ic.xjFDFI8z_E.png" alt="Get training" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'Fix buttom left training']);">
                  	
                  <h1>GET TRAINING</h1>
                  	</a>
               
            </div>
            <!-- services -->
            	
            <div class="services">
               	<a href="http://www.vogella.com/books/index.html">
                  	<img src="http://www.vogella.com/img/tutoriallinks/books.png.pagespeed.ce.iDpNUUudib.png" alt="Purchase books" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'Fix buttom left books']);">
                  	
                  <h1>PURCHASE BOOKS</h1>
                  	</a>
               
            </div>
            <!-- services -->
            	
            <div class="services">	
               	<a href="http://www.vogella.com/support.html">
                  	<img src="http://www.vogella.com/img/tutoriallinks/xdonate.png.pagespeed.ic.DDVinfleA6.png" alt="Support free tutorials" onclick="_gaq.push(['_trackEvent', 'Donations', 'clicked', 'Fix buttom left']);">
                  	
                  <h1>SUPPORT FREE TUTORIAL</h1>
                  	</a>
               
               
            </div> 
            <!-- services -->       
            
         </div> 
         <!-- bottom_left -->
         
         
      </div> 
      <!--rightcol-->
      
      
      <div class="article">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a name="d143577e1"></a>Testing with EasyMock - Tutorial
                  </h2>
               </div>
               <div>
                  <div class="author">
                     <h3 class="author"><span class="firstname">Lars</span> <span class="surname">Vogel</span></h3>
                  </div>
               </div>
               <div>
                  <p class="releaseinfo">
                     
                  </p>
                  <p>Version 1.4</p>
                  <p class="releaseinfo">
                     
                  </p>
               </div>
               <div>
                  <p class="copyright">Copyright ? 2011, 2012, 2013 vogella GmbH</p>
               </div>
               <div>
                  <p class="pubdate">22.10.2013</p>
               </div>
               <div>
                  <div class="abstract"><a name="abstract"></a><p class="title"><b>Testing with EasyMock</b></p>
                     <p> This tutorial explains testing with the EasyMock framework
                        within Eclipse. It is based on the EasyMock 3.1 release.
                        
                     </p>
                  </div>
               </div>
            </div>
            <div>
               <div xmlns:fo="http://www.w3.org/1999/XSL/Format" id="ad-beforeTOC"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('ad-beforeTOC');});</script></div>
            </div>
            <hr>
         </div>
         <div class="toc">
            <p><b>Table of Contents</b></p>
            <dl>
               <dt><span class="section"><a href="#prerequisites">1. Prerequisites</a></span></dt>
               <dt><span class="section"><a href="#easymock_overview">2. EasyMock</a></span></dt>
               <dt><span class="section"><a href="#easymock_installation">3. Download Easy Mock</a></span></dt>
               <dt><span class="section"><a href="#tutorial_easymock">4. Tutorial: Using Easy Mock and JUnit</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#tutorial_easymockproject">4.1. Create project and classes</a></span></dt>
                     <dt><span class="section"><a href="#tutorial_easymocktest">4.2. Create tests</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="section"><a href="#supportandlicense">5. About this website</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#thankyou">5.1. Donate to support free tutorials</a></span></dt>
                     <dt><span class="section"><a href="#questions">5.2. Questions and discussion</a></span></dt>
                     <dt><span class="section"><a href="#thankyou">5.3. License for this tutorial and its code</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="section"><a href="#resources">6. Links and Literature</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#resources_easymock">6.1. EasyMock</a></span></dt>
                  </dl>
               </dd>
            </dl>
         </div>
         <script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
         
         <!-- Responsive - After Table of Content -->
         <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3851443674951530" data-ad-slot="4470606330" data-ad-format="auto"></ins>
         <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="prerequisites"></a>1.&nbsp;Prerequisites
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               The following tutorial is based on an understanding of unit
               testing
               with the
               JUnit framework.
               
            </p>
            <p>
               In case your are not familiar with JUnit please check the following
               <a class="ulink" href="http://www.vogella.com/tutorials/JUnit/article.html" target="_top"> JUnit Tutorial</a>.
               
            </p>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="easymock_overview"></a>2.&nbsp;EasyMock
                     </h2>
                  </div>
               </div>
            </div><a class="indexterm" name="d143577e53"></a><p>
               <em class="wordasword">EasyMock</em>
               is a mock framework which can be easily used
               in
               conjunction with
               JUnit.
               The following description demonstrates the
               usage of
               EasyMock.
               
            </p>
            <p>EasyMock instantiates an object based on an interface or class.
               
            </p>
            <p>
               
            </p><pre class="programlisting"><span class="hl-keyword">import</span> <span class="hl-keyword">static</span> org.easymock.EasyMock.createNiceMock;
....

<em class="hl-comment" style="color: #080">// ICalcMethod is the object which is mocked</em>
ICalcMethod calcMethod = createNiceMock(ICalcMethod.<span class="hl-keyword">class</span>); </pre><p>
               
            </p>
            <p>
               The
               <code class="code">createNiceMock()</code>
               method creates a mock which returns default values for methods which
               are not overiden. A mock created with the
               <code class="code">Mock()</code>
               method will fails in such a case.
               
            </p>
            <p>
               EasyMock has several methods which are used to configure the Mock
               object.
               The
               <code class="code">expect()</code>
               method tells EasyMock to simulate a method
               with certain
               arguments. The
               <code class="code">andReturn()</code>
               method
               defines the return value of this
               method for the specified method
               parameters. The
               <code class="code">times()</code>
               method defines how often the Mock object will be
               called.
               
            </p>
            <p>
               The
               <code class="code">replay()</code>
               method is called to make the Mock object
               available.
               
            </p>
            <p>
               
            </p><pre class="programlisting"><em class="hl-comment" style="color: #080">// setup the mock object</em>
expect(calcMethod.calc(Position.BOSS)).andReturn(<span class="hl-number">70000.0</span>).times(<span class="hl-number">2</span>);
expect(calcMethod.calc(Position.PROGRAMMER)).andReturn(<span class="hl-number">50000.0</span>);
<em class="hl-comment" style="color: #080">// Setup is finished need to activate the mock</em>
replay(calcMethod); </pre><p>
               
            </p>
         </div>
         <!-- Non responsive Lake Quincy Ads
<div data-type="ad" data-publisher="lqm.javaeclipseandroid.site" data-zone="inBetween01" data-format="728x90">
</div> -->
         <!-- Responsive Lake Quincy Ads -->
         <div id="ad-inBetween01">
            	<script type="text/javascript">googletag.cmd.push(function(){googletag.display('ad-inBetween01');});</script>
            </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="easymock_installation"></a>3.&nbsp;Download Easy Mock
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               Download
               EasyMock
               from the EasyMock Homepage
               and add the
               <code class="code">easymock.jar</code>
               library
               to your classpath.
               
            </p>
            <p>
               
            </p><pre class="programlisting">http:<em class="hl-comment" style="color: #080">//easymock.org/ </em></pre><p>
               
            </p>
            <p>
               You also
               need to download the
               <a class="ulink" href="http://objenesis.googlecode.com/svn/docs/download.html" target="_top">Objenesis</a>
               and
               <a class="ulink" href="http://cglib.sourceforge.net/" target="_top"> Cglib</a>
               libraries
               and add these
               <code class="filename">jars</code>
               to your classpath.
               
            </p>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="tutorial_easymock"></a>4.&nbsp;Tutorial: Using Easy Mock and JUnit
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="tutorial_easymockproject"></a>4.1.&nbsp;Create project and classes
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Create a new Java Project called
                  <em class="wordasword">com.vogella.testing.easymock.first</em>. Create the
                  following
                  classes.
                  
               </p>
               <p>
                  
               </p><pre class="programlisting"><span class="hl-keyword">package</span> com.vogella.testing.easymock.first;

<span class="hl-keyword">public</span> enum Position {
    BOSS, PROGRAMMER, SURFER
} </pre><p>
                  
               </p>
               <p>
                  
               </p><pre class="programlisting"><span class="hl-keyword">package</span> com.vogella.testing.easymock.first;

<span class="hl-keyword">public</span> <span class="hl-keyword">interface</span> ICalcMethod {
    <span class="hl-keyword">double</span> calc(Position position);
} </pre><p>
                  
               </p>
               <p>
                  
               </p><pre class="programlisting"><span class="hl-keyword">package</span> com.vogella.testing.easymock.first;

<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> IncomeCalculator {

    <span class="hl-keyword">private</span> ICalcMethod calcMethod;
    <span class="hl-keyword">private</span> Position position;

    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> setCalcMethod(ICalcMethod calcMethod) {
        <span class="hl-keyword">this</span>.calcMethod = calcMethod;
    }

    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> setPosition(Position position) {
        <span class="hl-keyword">this</span>.position = position;
    }

    <span class="hl-keyword">public</span> <span class="hl-keyword">double</span> calc() {
        <span class="hl-keyword">if</span> (calcMethod == null) {
            <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> RuntimeException(<span class="hl-string" style="color:blue">"CalcMethod not yet maintained"</span>);
        }
        <span class="hl-keyword">if</span> (position == null) {
            <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> RuntimeException(<span class="hl-string" style="color:blue">"Position not yet maintained"</span>);
        }
        <span class="hl-keyword">return</span> calcMethod.calc(position);
    }
} </pre><p>
                  
               </p>
               <p>
                  The
                  <code class="code">IncomeCalculator</code>
                  class should be
                  tested. The
                  class has the
                  purpose to calculate the
                  salary of a person based on
                  the provided
                  method and
                  position. Obviously
                  the
                  test depends
                  on the
                  provided methods.
                  
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="tutorial_easymocktest"></a>4.2.&nbsp;Create tests
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Create a new
                  <code class="filename">test</code>
                  source folder in your project.
                  
               </p>
               <p>
                  Create a new test for
                  <code class="code">IncomeCalculator</code>
                  and place the new test class in this
                  folder.
                  
               </p>
               <p>
                  
               </p><pre class="programlisting"><span class="hl-keyword">package</span> com.vogella.testing.easymock.first.test;

<em class="hl-comment" style="color: #080">// use static imports to </em>
<em class="hl-comment" style="color: #080">// have direct access to these methods</em>
<span class="hl-keyword">import</span> <span class="hl-keyword">static</span> org.easymock.EasyMock.createNiceMock;
<span class="hl-keyword">import</span> <span class="hl-keyword">static</span> org.easymock.EasyMock.expect;
<span class="hl-keyword">import</span> <span class="hl-keyword">static</span> org.easymock.EasyMock.replay;
<span class="hl-keyword">import</span> <span class="hl-keyword">static</span> org.easymock.EasyMock.verify;
<span class="hl-keyword">import</span> <span class="hl-keyword">static</span> org.junit.Assert.assertEquals;
<span class="hl-keyword">import</span> <span class="hl-keyword">static</span> org.junit.Assert.fail;

<span class="hl-keyword">import</span> org.junit.Before;
<span class="hl-keyword">import</span> org.junit.Test;

<span class="hl-keyword">import</span> com.vogella.testing.easymock.first.ICalcMethod;
<span class="hl-keyword">import</span> com.vogella.testing.easymock.first.IncomeCalculator;
<span class="hl-keyword">import</span> com.vogella.testing.easymock.first.Position;

<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> IncomeCalculatorTest {

  <span class="hl-keyword">private</span> ICalcMethod calcMethod;
  <span class="hl-keyword">private</span> IncomeCalculator calc;

  <em><span class="hl-annotation" style="color: gray">@Before</span></em>
  <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> setUp() <span class="hl-keyword">throws</span> Exception {
    <em class="hl-comment" style="color: #080">// NiceMocks return default values for</em>
    <em class="hl-comment" style="color: #080">// unimplemented methods</em>
    calcMethod = createNiceMock(ICalcMethod.<span class="hl-keyword">class</span>);
    calc = <span class="hl-keyword">new</span> IncomeCalculator();
  }

  <em><span class="hl-annotation" style="color: gray">@Test</span></em>
  <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> testCalc1() {
    <em class="hl-comment" style="color: #080">// Setting up the expected value of the method call calc</em>
    expect(calcMethod.calc(Position.BOSS)).andReturn(<span class="hl-number">70000.0</span>).times(<span class="hl-number">2</span>);
    expect(calcMethod.calc(Position.PROGRAMMER)).andReturn(<span class="hl-number">50000.0</span>);
    <em class="hl-comment" style="color: #080">// Setup is finished need to activate the mock</em>
    replay(calcMethod);

    calc.setCalcMethod(calcMethod);
    <span class="hl-keyword">try</span> {
      calc.calc();
      fail(<span class="hl-string" style="color:blue">"Exception did not occur"</span>);
    } <span class="hl-keyword">catch</span> (RuntimeException e) {

    }
    calc.setPosition(Position.BOSS);
    assertEquals(<span class="hl-number">70000.0</span>, calc.calc(), <span class="hl-number">0</span>);
    assertEquals(<span class="hl-number">70000.0</span>, calc.calc(), <span class="hl-number">0</span>);
    calc.setPosition(Position.PROGRAMMER);
    assertEquals(<span class="hl-number">50000.0</span>, calc.calc(), <span class="hl-number">0</span>);
    calc.setPosition(Position.SURFER);
    verify(calcMethod);
  }

  <em><span class="hl-annotation" style="color: gray">@Test(expected = RuntimeException.class)</span></em>
  <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> testNoCalc() {
    calc.setPosition(Position.SURFER);
    calc.calc();
  }

  <em><span class="hl-annotation" style="color: gray">@Test(expected = RuntimeException.class)</span></em>
  <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> testNoPosition() {
    expect(calcMethod.calc(Position.BOSS)).andReturn(<span class="hl-number">70000.0</span>);
    replay(calcMethod);
    calc.setCalcMethod(calcMethod);
    calc.calc();
  }

  <em><span class="hl-annotation" style="color: gray">@Test(expected = RuntimeException.class)</span></em>
  <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> testCalc2() {
    <em class="hl-comment" style="color: #080">// Setting up the expected value of the method call calc</em>
    expect(calcMethod.calc(Position.SURFER)).andThrow(<span class="hl-keyword">new</span> RuntimeException(<span class="hl-string" style="color:blue">"Don't know this guy"</span>)).times(<span class="hl-number">1</span>);

    <em class="hl-comment" style="color: #080">// Setup is finished need to activate the mock</em>
    replay(calcMethod);
    calc.setPosition(Position.SURFER);
    calc.setCalcMethod(calcMethod);
    calc.calc();
  }

} </pre><p>
                  
               </p>
               <p>
                  After execution of the test you can call the
                  <code class="code">verify</code>
                  method to
                  check if the mock object was called as defined.
                  
               </p>
            </div>
         </div> 
         <script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
         
         <!-- Article - Before Support 336 x 280 -->
         <ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-3851443674951530" data-ad-slot="3645921933"></ins>
         <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="supportandlicense"></a>5.&nbsp;About this website
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="thankyou"></a>5.1.&nbsp;Donate to support free tutorials
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  
                  	
               </p>
               <p>
                  		Please consider a contribution
                  	<a href="http://www.vogella.com/support.html">
                     			<img src="http://www.vogella.com/img/common/40x50xvogella-donate.png.pagespeed.ic.gMuY8kQC6X.png" width="40" height="50" alt="Support free tutorials" title="Support free tutorials" onclick="_gaq.push(['_trackEvent', 'Donations', 'clicked', 'Buttom tutorial in thank you']);"></a>
                  			if this article helped you. It will help to maintain our content and our Open Source activities.
                  	
               </p>
               <p>
                  
                  
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="questions"></a>5.2.&nbsp;Questions and discussion
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Writing and updating these tutorials is a lot of work.
                  If this
                  free community service was helpful,
                  you can support the cause by
                  giving
                  a tip
                  as well as reporting typos and factual errors.
                  
               </p>
               <p>
                  If you find errors in this tutorial, please notify me
                  (see the
                  <a class="ulink" href="#top" target="_top">top of the page</a>).
                  Please note that due to the high volume of feedback I
                  receive, I
                  cannot answer questions to your implementation. Ensure you
                  have read
                  the
                  <a class="ulink" href="http://www.vogella.com/faq.html" target="_top">vogella FAQ</a>
                  as
                  I don't respond to questions already answered there.
                  
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="thankyou"></a>5.3.&nbsp;License for this tutorial and its code
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  This tutorial is Open Content under the
                  <a class="ulink" href="http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.en" target="_top">
                     CC BY-NC-SA 3.0 DE
                     </a>
                  license. Source code in this tutorial is distributed under the
                  <a class="ulink" href="https://www.eclipse.org/legal/epl-v10.html" target="_top">Eclipse Public License</a>.
                  See the
                  <a class="ulink" href="http://www.vogella.com/license.html" target="_top">vogella License</a>
                  page
                  for details on the terms of reuse.
                  
               </p>
            </div>
         </div>
         
         
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="resources"></a>6.&nbsp;Links and Literature
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="resources_easymock"></a>6.1.&nbsp;EasyMock
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  <a class="ulink" href="http://easymock.org/" target="_top">
                     EasyMock Homepage</a>
                  
               </p>
            </div>
         </div><img src="http://vg03.met.vgwort.de/na/bdc8425c509242038382f03ab24baef7" width="1" height="1" alt=""></div>
      
      
      
   <script pagespeed_no_defer="">//<![CDATA[
(function(){window.pagespeed=window.pagespeed||{};var f=window.pagespeed,h=function(e,a,c,b){this.c=e;this.a=a;this.b=c;this.d=b};f.beaconUrl="";
var k=function(e){var a=e.c,c=window.mod_pagespeed_start,b=Number(new Date)-c,a=a+(-1==a.indexOf("?")?"?":"&"),a=a+"ets="+("load"==e.a?"load:":"unload:"),a=a+b;if("beforeunload"!=e.a||!window.mod_pagespeed_loaded){a+="&r"+e.a+"=";if(window.performance){var b=window.performance.timing,d=b.navigationStart,g=b.requestStart,a=a+(b[e.a+"EventStart"]-d),a=a+("&nav="+(b.fetchStart-d)),a=a+("&dns="+(b.domainLookupEnd-b.domainLookupStart)),a=a+("&connect="+(b.connectEnd-b.connectStart)),a=a+("&req_start="+
(g-d)),a=a+("&ttfb="+(b.responseStart-g)),a=a+("&dwld="+(b.responseEnd-b.responseStart)),a=a+("&dom_c="+(b.domContentLoadedEventStart-d));window.performance.navigation&&(a+="&nt="+window.performance.navigation.type);d=-1;b.msFirstPaint?d=b.msFirstPaint:window.chrome&&window.chrome.loadTimes&&(d=Math.floor(1E3*window.chrome.loadTimes().firstPaintTime));d=d-g;0<=d&&(a+="&fp="+d)}else a+=b;f.getResourceTimingData&&window.parent==window&&(a+=f.getResourceTimingData());a+=window.parent!=window?"&ifr=1":
"&ifr=0";"load"==e.a&&(window.mod_pagespeed_loaded=!0,(b=window.mod_pagespeed_num_resources_prefetched)&&(a+="&nrp="+b),(b=window.mod_pagespeed_prefetch_start)&&(a+="&htmlAt="+(c-b)));f.panelLoader&&(c=f.panelLoader.getCsiTimingsString(),""!=c&&(a+="&b_csi="+c));f.criticalCss&&(c=f.criticalCss,a+="&ccis="+c.total_critical_inlined_size+"&cces="+c.total_original_external_size+"&ccos="+c.total_overhead_size+"&ccrl="+c.num_replaced_links+"&ccul="+c.num_unreplaced_links);""!=e.b&&(a+=e.b);document.referrer&&
(a+="&ref="+encodeURIComponent(document.referrer));a+="&url="+encodeURIComponent(e.d);f.beaconUrl=a;(new Image).src=a}};f.e=function(e,a,c,b){var d=new h(e,a,c,b);window.addEventListener?window.addEventListener(a,function(){k(d)},!1):window.attachEvent("on"+a,function(){k(d)})};f.addInstrumentationInit=f.e;})();

pagespeed.addInstrumentationInit('/mod_pagespeed_beacon', 'load', '', 'http://www.vogella.com/tutorials/EasyMock/article.html');
//]]></script></body>
</html>

